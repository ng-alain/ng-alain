import{O as L,Q as c,R as v}from"./chunk-X6MNWV6J.js";import{Aa as $,Ea as d,F as D,Fa as F,Gb as B,Ha as p,Hb as z,Ia as k,Ja as E,Jb as Z,Na as N,W as x,Wc as W,Xc as G,a as C,aa as I,ad as Q,ba as w,da as m,fa as j,ga as O,ha as S,ja as T,jc as A,k as y,oa as M,q as s}from"./chunk-KYFWSS57.js";var U=["container"],J=(()=>{let t=class t{get cog(){return this._cog}set cog(e){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},e)}constructor(e,o){this.cogSrv=e,this.lazySrv=o,this.loading=!1,this.loaded=!1,this.notify$=new y,this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(m(G),m(W))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),P=(()=>{let t=class t{get chart(){return this._chart}get winG2(){return window.G2}constructor(e,o,n,a,u){this.srv=e,this.el=o,this.ngZone=n,this.platform=a,this.cdr=u,this.repaint=!0,this.destroy$=new y,this.loaded=!1,this.delay=0,this.ready=new p,this.theme=e.cog.theme,this.srv.notify.pipe(x(this.destroy$),D(()=>!this.loaded)).subscribe(()=>this.load())}changeData(){}onInit(){}onChanges(e){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(e){if(this.onChanges(e),this.onlyChangeData?this.onlyChangeData(e):Object.keys(e).length===1&&!!e.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}};t.\u0275fac=function(o){return new(o||t)(d(J),d($),d(k),d(Q),d(F))},t.\u0275dir=S({type:t,viewQuery:function(o,n){if(o&1&&z(U,7),o&2){let a;B(a=Z())&&(n.node=a.first)}},inputs:{repaint:"repaint",delay:"delay",theme:"theme"},outputs:{ready:"ready"},features:[T]});let i=t;return s([L()],i.prototype,"repaint",void 0),s([c()],i.prototype,"delay",void 0),s([v()],i.prototype,"load",null),s([v()],i.prototype,"destroyChart",null),i})();function R(i,t){let l=C({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},t);return i==="mini"&&(l.position="top",l.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},l.itemTpl="<li>{value}</li>",l.offset=8),l}var xt=(()=>{let t=class t extends P{constructor(){super(...arguments),this.color="#1890FF",this.height=0,this.borderWidth=5,this.padding=[8,8,8,8],this.data=[],this.yTooltipSuffix="",this.tooltipType="default",this.clickItem=new p}install(){let{el:e,height:o,padding:n,yTooltipSuffix:a,tooltipType:u,theme:V,color:_,borderWidth:q}=this,r=this._chart=new this.winG2.Chart({container:e.nativeElement,autoFit:!0,height:o,padding:n,theme:V});r.scale({x:{type:"cat"},y:{min:0}}),r.legend(!1),r.axis(!1),r.tooltip(R(u,{showCrosshairs:!1})),r.interval().position("x*y").color("x*y",(h,f)=>{let g=this.data.find(b=>b.x===h&&b.y===f);return g&&g.color?g.color:_}).size(q).tooltip("x*y",(h,f)=>({name:h,value:f+a})),r.on("interval:click",h=>{this.ngZone.run(()=>this.clickItem.emit({item:h.data?.data,ev:h}))}),this.ready.next(r),this.changeData(),r.render()}changeData(){let{_chart:e,data:o}=this;!e||!Array.isArray(o)||o.length<=0||e.changeData(o)}};t.\u0275fac=(()=>{let e;return function(n){return(e||(e=M(t)))(n||t)}})(),t.\u0275cmp=j({type:t,selectors:[["g2-mini-bar"]],hostVars:2,hostBindings:function(o,n){o&2&&N("height",n.height,"px")},inputs:{color:"color",height:"height",borderWidth:"borderWidth",padding:"padding",data:"data",yTooltipSuffix:"yTooltipSuffix",tooltipType:"tooltipType"},outputs:{clickItem:"clickItem"},exportAs:["g2MiniBar"],features:[E],decls:0,vars:0,template:function(o,n){},encapsulation:2,changeDetection:0});let i=t;return s([c()],i.prototype,"height",void 0),s([c()],i.prototype,"borderWidth",void 0),i})();var It=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=O({type:t}),t.\u0275inj=w({imports:[A]});let i=t;return i})();export{P as a,R as b,xt as c,It as d};
