import{P as g}from"./chunk-MXLRDN6Y.js";import{$a as B,Bc as A,Db as _,Eb as $,Fb as j,H as v,Oa as O,Pa as T,Qa as S,Sa as F,Ua as h,X as b,a as y,ba as C,ca as D,fa as r,gc as G,hc as k,ic as s,ja as x,k as u,nd as E,oa as w,od as z,q as f,ra as d,sa as M,va as I,vd as N}from"./chunk-2NBHHZGH.js";var H=["container"],U=(()=>{class e{cogSrv=r(z);lazySrv=r(E);_cog;loading=!1;loaded=!1;notify$=new u;get cog(){return this._cog}set cog(t){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},t)}constructor(){this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Z=(()=>{class e{srv=r(U);el=r(I);ngZone=r(M);platform=r(N);cdr=r(G);get chart(){return this._chart}get winG2(){return window.G2}constructor(){this.theme=this.srv.cog.theme,this.srv.notify.pipe(b(this.destroy$),v(()=>!this.loaded)).subscribe(()=>this.load())}repaint=!0;node;resize$;destroy$=new u;_chart;loaded=!1;delay=0;theme;ready=new d;onlyChangeData;changeData(){}onInit(){}onChanges(t){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(t){if(this.onChanges(t),this.onlyChangeData?this.onlyChangeData(t):Object.keys(t).length===1&&!!t.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}static \u0275fac=function(i){return new(i||e)};static \u0275dir=S({type:e,viewQuery:function(i,o){if(i&1&&_(H,7),i&2){let l;$(l=j())&&(o.node=l.first)}},inputs:{repaint:[2,"repaint","repaint",k],delay:[2,"delay","delay",s],theme:"theme"},outputs:{ready:"ready"},features:[h,x]})}return f([g()],e.prototype,"load",null),f([g()],e.prototype,"destroyChart",null),e})();function W(e,Q){let t=y({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},Q);return e==="mini"&&(t.position="top",t.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},t.itemTpl="<li>{value}</li>",t.offset=8),t}var bt=(()=>{class e extends Z{color="#1890FF";height=0;borderWidth=5;padding=[8,8,8,8];data=[];yTooltipSuffix="";tooltipType="default";clickItem=new d;install(){let{el:t,height:i,padding:o,yTooltipSuffix:l,tooltipType:L,theme:P,color:R,borderWidth:V}=this,n=this._chart=new this.winG2.Chart({container:t.nativeElement,autoFit:!0,height:i,padding:o,theme:P});n.scale({x:{type:"cat"},y:{min:0}}),n.legend(!1),n.axis(!1),n.tooltip(W(L,{showCrosshairs:!1})),n.interval().position("x*y").color("x*y",(a,c)=>{let p=this.data.find(m=>m.x===a&&m.y===c);return p&&p.color?p.color:R}).size(V).tooltip("x*y",(a,c)=>({name:a,value:c+l})),n.on("interval:click",a=>{this.ngZone.run(()=>this.clickItem.emit({item:a.data?.data,ev:a}))}),this.ready.next(n),this.changeData(),n.render()}changeData(){let{_chart:t,data:i}=this;!t||!Array.isArray(i)||i.length<=0||t.changeData(i)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=w(e)))(o||e)}})();static \u0275cmp=O({type:e,selectors:[["g2-mini-bar"]],hostVars:2,hostBindings:function(i,o){i&2&&B("height",o.height,"px")},inputs:{color:"color",height:[2,"height","height",s],borderWidth:[2,"borderWidth","borderWidth",s],padding:"padding",data:"data",yTooltipSuffix:"yTooltipSuffix",tooltipType:"tooltipType"},outputs:{clickItem:"clickItem"},exportAs:["g2MiniBar"],features:[h,F],decls:0,vars:0,template:function(i,o){},encapsulation:2,changeDetection:0})}return e})();var Ct=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=T({type:e});static \u0275inj=D({imports:[A]})}return e})();export{Z as a,W as b,bt as c,Ct as d};
