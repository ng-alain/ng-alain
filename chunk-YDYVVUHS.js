import{$a as Ht,O as At,Q as qt,ab as Wt}from"./chunk-NN3D3XR2.js";import{$a as vt,B as M,Ba as j,Bd as $t,Ea as d,Eb as K,F as ft,Fa as v,Fb as pt,Ff as Et,Gb as P,Gf as Pt,Hf as kt,If as Mt,Jf as ut,Kf as it,La as yt,Lf as ht,Ma as p,Nb as b,Oa as F,Pa as r,Pf as Vt,Qa as Z,Ra as E,Rf as jt,U as $,Ua as lt,V as O,Va as wt,Vb as ct,W as gt,Wb as S,Xb as dt,Ya as h,_a as Tt,a as A,aa as Ct,ab as Ft,ac as mt,bb as f,cb as C,da as V,db as T,ec as bt,fa as H,ga as zt,gb as Ut,h as nt,hb as L,hc as Lt,hd as tt,ic as _t,j as N,k as q,kb as U,la as ot,ld as St,ma as y,mb as l,mg as Bt,na as w,nb as st,ob as rt,qc as Nt,s as R,sb as Q,sd as et,ta as at,tb as X,ua as W,ub as Y,uc as It,va as xt,vb as g,vc as Dt,w as k,wb as G,xc as Rt,yb as J,zc as Ot}from"./chunk-5APSEXGJ.js";var Yt=["file"],Gt=["nz-upload-btn",""],Qt=["*"],B=i=>({$implicit:i}),Jt=()=>({opacity:.5,"pointer-events":"none"});function Kt(i,a){}function te(i,a){if(i&1&&(f(0,"div",16),p(1,Kt,0,0,"ng-template",17),C()),i&2){let t=l(2).$implicit,e=g(5);E("ant-upload-list-item-file",!t.isUploading),d(),r("ngTemplateOutlet",e)("ngTemplateOutletContext",P(4,B,t))}}function ee(i,a){if(i&1&&T(0,"img",19),i&2){let t=l(3).$implicit;r("src",t.thumbUrl||t.url,j),F("alt",t.name)}}function ie(i,a){}function ne(i,a){if(i&1&&p(0,ie,0,0,"ng-template",17),i&2){let t=l(3).$implicit,e=g(5);r("ngTemplateOutlet",e)("ngTemplateOutletContext",P(2,B,t))}}function oe(i,a){if(i&1){let t=L();f(0,"a",18),U("click",function(n){y(t);let o=l(2).$implicit,s=l();return w(s.handlePreview(o,n))}),p(1,ee,1,2,"img",19)(2,ne,1,4,null,17),C()}if(i&2){let t=l(2).$implicit;E("ant-upload-list-item-file",!t.isImageUrl),r("href",t.url||t.thumbUrl,j),d(),h(t.isImageUrl?1:2)}}function ae(i,a){}function le(i,a){if(i&1&&(f(0,"div",15),p(1,ae,0,0,"ng-template",17),C()),i&2){let t=l(2).$implicit,e=g(5);d(),r("ngTemplateOutlet",e)("ngTemplateOutletContext",P(2,B,t))}}function se(i,a){if(i&1&&p(0,te,2,6,"div",13)(1,oe,3,4,"a",14)(2,le,2,4,"div",15),i&2){let t,e=l().$implicit;h((t=e.iconType)==="uploading"?0:t==="thumbnail"?1:2)}}function re(i,a){i&1&&T(0,"span",21)}function pe(i,a){if(i&1&&T(0,"span",22),i&2){let t=l(3).$implicit;r("nzType",t.isImageUrl?"picture":"file")}}function ce(i,a){if(i&1&&p(0,re,1,0,"span",21)(1,pe,1,1,"span",22),i&2){let t=l(2).$implicit;h(t.isUploading?0:1)}}function de(i,a){if(i&1&&G(0),i&2){let t=l(5);J(" ",t.locale.uploading," ")}}function me(i,a){if(i&1&&T(0,"span",22),i&2){let t=l(3).$implicit;r("nzType",t.isImageUrl?"picture":"file")}}function _e(i,a){if(i&1&&p(0,de,1,1)(1,me,1,1,"span",22),i&2){let t=l(2).$implicit;h(t.isUploading?0:1)}}function ue(i,a){if(i&1&&T(0,"span",20),i&2){let t=l(2).$implicit;r("nzType",t.isUploading?"loading":"paper-clip")}}function he(i,a){if(i&1&&p(0,ce,2,1)(1,_e,2,1)(2,ue,1,1,"span",20),i&2){let t,e=l(3);h((t=e.listType)==="picture"?0:t==="picture-card"?1:2)}}function fe(i,a){}function ge(i,a){if(i&1&&p(0,fe,0,0,"ng-template",17),i&2){let t=l().$implicit,e=l(2);r("ngTemplateOutlet",e.iconRender)("ngTemplateOutletContext",P(2,B,t))}}function Ce(i,a){if(i&1&&p(0,he,3,1)(1,ge,1,4,null,17),i&2){let t=l(2);h(t.iconRender?1:0)}}function ze(i,a){if(i&1){let t=L();f(0,"button",24),U("click",function(n){y(t);let o=l(2).$implicit,s=l();return w(s.handleRemove(o,n))}),T(1,"span",25),C()}if(i&2){let t=l(3);F("title",t.locale.removeFile)}}function xe(i,a){if(i&1&&p(0,ze,2,1,"button",23),i&2){let t=l(2);h(t.icons.showRemoveIcon?0:-1)}}function ye(i,a){if(i&1){let t=L();f(0,"button",24),U("click",function(){y(t);let n=l(2).$implicit,o=l();return w(o.handleDownload(n))}),T(1,"span",26),C()}if(i&2){let t=l(3);F("title",t.locale.downloadFile)}}function we(i,a){if(i&1&&p(0,ye,2,1,"button",23),i&2){let t=l().$implicit;h(t.showDownload?0:-1)}}function Te(i,a){}function ve(i,a){}function Fe(i,a){if(i&1&&(f(0,"span"),p(1,Te,0,0,"ng-template",10)(2,ve,0,0,"ng-template",10),C()),i&2){l(2);let t=g(7),e=g(9),n=l();lt("ant-upload-list-item-card-actions ",n.listType==="picture"?"picture":"",""),d(),r("ngTemplateOutlet",e),d(),r("ngTemplateOutlet",t)}}function Ue(i,a){if(i&1&&p(0,Fe,3,5,"span",6),i&2){let t=l(2);h(t.listType!=="picture-card"?0:-1)}}function be(i,a){if(i&1){let t=L();f(0,"a",29),U("click",function(n){y(t);let o=l(2).$implicit,s=l();return w(s.handlePreview(o,n))}),G(1),C()}if(i&2){let t=l(2).$implicit;r("href",t.url,j),F("title",t.name)("download",t.linkProps&&t.linkProps.download),d(),J(" ",t.name," ")}}function Le(i,a){if(i&1){let t=L();f(0,"span",30),U("click",function(n){y(t);let o=l(2).$implicit,s=l();return w(s.handlePreview(o,n))}),G(1),C()}if(i&2){let t=l(2).$implicit;F("title",t.name),d(),J(" ",t.name," ")}}function Ne(i,a){}function Ie(i,a){if(i&1&&p(0,be,2,4,"a",27)(1,Le,2,2,"span",28)(2,Ne,0,0,"ng-template",10),i&2){let t=l().$implicit,e=g(11);h(t.url?0:1),d(2),r("ngTemplateOutlet",e)}}function De(i,a){}function Re(i,a){}function Oe(i,a){if(i&1){let t=L();f(0,"a",32),U("click",function(n){y(t);let o=l(2).$implicit,s=l();return w(s.handlePreview(o,n))}),T(1,"span",33),C()}if(i&2){let t=l(2).$implicit,e=l();r("href",t.url||t.thumbUrl,j)("ngStyle",t.url||t.thumbUrl?null:pt(3,Jt)),F("title",e.locale.previewFile)}}function Se(i,a){}function $e(i,a){if(i&1&&p(0,Se,0,0,"ng-template",10),i&2){l(2);let t=g(9);r("ngTemplateOutlet",t)}}function Ee(i,a){}function Pe(i,a){if(i&1&&(f(0,"span",11),p(1,Oe,2,4,"a",31)(2,$e,1,1,null,10)(3,Ee,0,0,"ng-template",10),C()),i&2){let t=l().$implicit,e=g(7),n=l();d(),h(n.icons.showPreviewIcon?1:-1),d(),h(t.status==="done"?2:-1),d(),r("ngTemplateOutlet",e)}}function ke(i,a){if(i&1&&(f(0,"div",12),T(1,"nz-progress",34),C()),i&2){let t=l().$implicit;d(),r("nzPercent",t.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function Me(i,a){if(i&1&&(f(0,"div")(1,"div",7),p(2,se,3,1,"ng-template",null,0,b)(4,Ce,2,1,"ng-template",null,1,b)(6,xe,1,1,"ng-template",null,2,b)(8,we,1,1,"ng-template",null,3,b)(10,Ue,1,1,"ng-template",null,4,b)(12,Ie,3,2,"ng-template",null,5,b),f(14,"div",8)(15,"span",9),p(16,De,0,0,"ng-template",10)(17,Re,0,0,"ng-template",10),C()(),p(18,Pe,4,3,"span",11)(19,ke,2,3,"div",12),C()()),i&2){let t=a.$implicit,e=g(3),n=g(13),o=l();lt("ant-upload-list-",o.listType,"-container"),d(),wt("ant-upload-list-item ant-upload-list-item-",t.status," ant-upload-list-item-list-type-",o.listType,""),r("@itemState",void 0)("nzTooltipTitle",t.status==="error"?t.message:null),F("data-key",t.key),d(15),r("ngTemplateOutlet",e),d(),r("ngTemplateOutlet",n),d(),h(o.listType==="picture-card"&&!t.isUploading?18:-1),d(),h(t.isUploading?19:-1)}}var Ve=["uploadComp"],je=["listComp"],Be=()=>[];function Ae(i,a){if(i&1&&T(0,"nz-upload-list",6,3),i&2){let t=l(2);Z("display",t.nzShowUploadList?"":"none"),r("locale",t.locale)("listType",t.nzListType)("items",t.nzFileList||pt(13,Be))("icons",t.nzShowUploadList)("iconRender",t.nzIconRender)("previewFile",t.nzPreviewFile)("previewIsImage",t.nzPreviewIsImage)("onPreview",t.nzPreview)("onRemove",t.onRemove)("onDownload",t.nzDownload)("dir",t.dir)}}function qe(i,a){i&1&&Ut(0)}function He(i,a){if(i&1&&p(0,qe,1,0,"ng-container",7),i&2){let t=l(2);r("ngTemplateOutlet",t.nzFileListRender)("ngTemplateOutletContext",P(2,B,t.nzFileList))}}function We(i,a){if(i&1&&p(0,Ae,2,14,"nz-upload-list",5)(1,He,1,4,"ng-container"),i&2){let t=l();h(t.locale&&!t.nzFileListRender?0:-1),d(),h(t.nzFileListRender?1:-1)}}function Ze(i,a){i&1&&rt(0)}function Qe(i,a){}function Xe(i,a){if(i&1&&(f(0,"div",8)(1,"div",9,4),p(3,Qe,0,0,"ng-template",10),C()()),i&2){let t=l(),e=g(3);Z("display",t.nzShowButton?"":"none"),r("ngClass",t.classList),d(),r("options",t._btnOptions),d(2),r("ngTemplateOutlet",e)}}function Ye(i,a){}function Ge(i,a){}function Je(i,a){if(i&1){let t=L();f(0,"div",11),U("drop",function(n){y(t);let o=l();return w(o.fileDrop(n))})("dragover",function(n){y(t);let o=l();return w(o.fileDrop(n))})("dragleave",function(n){y(t);let o=l();return w(o.fileDrop(n))}),f(1,"div",12,4)(3,"div",13),p(4,Ye,0,0,"ng-template",10),C()()(),p(5,Ge,0,0,"ng-template",10)}if(i&2){let t=l(),e=g(1),n=g(3);r("ngClass",t.classList),d(),r("options",t._btnOptions),d(3),r("ngTemplateOutlet",n),d(),r("ngTemplateOutlet",e)}}function Ke(i,a){}function ti(i,a){}function ei(i,a){if(i&1&&p(0,Ke,0,0,"ng-template",10)(1,ti,0,0,"ng-template",10),i&2){l(2);let t=g(1),e=g(5);r("ngTemplateOutlet",t),d(),r("ngTemplateOutlet",e)}}function ii(i,a){}function ni(i,a){}function oi(i,a){if(i&1&&p(0,ii,0,0,"ng-template",10)(1,ni,0,0,"ng-template",10),i&2){l(2);let t=g(1),e=g(5);r("ngTemplateOutlet",e),d(),r("ngTemplateOutlet",t)}}function ai(i,a){if(i&1&&p(0,ei,2,2)(1,oi,2,2),i&2){let t=l();h(t.nzListType==="picture-card"?0:1)}}var li=(()=>{class i{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(t){if(this.options.disabled||t.type==="dragover"){t.preventDefault();return}if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{let e=Array.prototype.slice.call(t.dataTransfer.files).filter(n=>this.attrAccept(n,this.options.accept));e.length&&this.uploadFiles(e)}t.preventDefault()}onChange(t){if(this.options.disabled)return;let e=t.target;this.uploadFiles(e.files),e.value=""}traverseFileTree(t){let e=(n,o)=>{n.isFile?n.file(s=>{this.attrAccept(s,this.options.accept)&&this.uploadFiles([s])}):n.isDirectory&&n.createReader().readEntries(c=>{for(let u of c)e(u,`${o}${n.name}/`)})};for(let n of t)e(n.webkitGetAsEntry(),"")}attrAccept(t,e){if(t&&e){let n=Array.isArray(e)?e:e.split(","),o=`${t.name}`,s=`${t.type}`,c=s.replace(/\/.*$/,"");return n.some(u=>{let m=u.trim();return m.charAt(0)==="."?o.toLowerCase().indexOf(m.toLowerCase(),o.toLowerCase().length-m.toLowerCase().length)!==-1:/\/\*$/.test(m)?c===m.replace(/\/.*$/,""):s===m})}return!0}attachUid(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}uploadFiles(t){let e=R(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach(n=>{e=e.pipe($(o=>{let s=n.fn(o);return s instanceof N?s:R(s)}))}),e.subscribe(n=>{n.forEach(o=>{this.attachUid(o),this.upload(o,n)})},n=>{et("Unhandled upload filter error",n)})}upload(t,e){if(!this.options.beforeUpload)return this.post(t);let n=this.options.beforeUpload(t,e);if(n instanceof N)n.subscribe(o=>{let s=Object.prototype.toString.call(o);s==="[object File]"||s==="[object Blob]"?(this.attachUid(o),this.post(o)):typeof o=="boolean"&&o!==!1&&this.post(t)},o=>{et("Unhandled upload beforeUpload error",o)});else if(n!==!1)return this.post(t)}post(t){if(this.destroy)return;let e=R(t),n,o=this.options,{uid:s}=t,{action:c,data:u,headers:m,transformFile:D}=o,x={action:typeof c=="string"?c:"",name:o.name,headers:m,file:t,postFile:t,data:u,withCredentials:o.withCredentials,onProgress:o.onProgress?_=>{o.onProgress(_,t)}:void 0,onSuccess:(_,z)=>{this.clean(s),o.onSuccess(_,t,z)},onError:_=>{this.clean(s),o.onError(_,t)}};if(typeof c=="function"){let _=c(t);_ instanceof N?e=e.pipe($(()=>_),k(z=>(x.action=z,t))):x.action=_}if(typeof D=="function"){let _=D(t);e=e.pipe($(()=>_ instanceof N?_:R(_)),gt(z=>n=z))}if(typeof u=="function"){let _=u(t);_ instanceof N?e=e.pipe($(()=>_),k(z=>(x.data=z,n??t))):x.data=_}if(typeof m=="function"){let _=m(t);_ instanceof N?e=e.pipe($(()=>_),k(z=>(x.headers=z,n??t))):x.headers=_}e.subscribe(_=>{x.postFile=_;let z=(o.customRequest||this.xhr).call(this,x);z instanceof nt||et("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[s]=z,o.onStart(t)})}xhr(t){let e=new FormData;t.data&&Object.keys(t.data).map(o=>{e.append(o,t.data[o])}),e.append(t.name,t.postFile),t.headers||(t.headers={}),t.headers["X-Requested-With"]!==null?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];let n=new It("POST",t.action,e,{reportProgress:!0,withCredentials:t.withCredentials,headers:new Nt(t.headers)});return this.http.request(n).subscribe(o=>{o.type===Dt.UploadProgress?(o.total>0&&(o.percent=o.loaded/o.total*100),t.onProgress(o,t.file)):o instanceof Rt&&t.onSuccess(o.body,t.file,o)},o=>{this.abort(t.file),t.onError(o,t.file)})}clean(t){let e=this.reqs[t];e instanceof nt&&e.unsubscribe(),delete this.reqs[t]}abort(t){t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach(e=>this.clean(e))}constructor(t,e){if(this.ngZone=t,this.elementRef=e,this.reqs={},this.destroy=!1,this.destroy$=new q,this.http=V(Ot,{optional:!0}),!this.http)throw new Error("Not found 'HttpClient', You can configure 'HttpClient' with 'provideHttpClient()' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{M(this.elementRef.nativeElement,"click").pipe(O(this.destroy$)).subscribe(()=>this.onClick()),M(this.elementRef.nativeElement,"keydown").pipe(O(this.destroy$)).subscribe(t=>{this.options.disabled||(t.key==="Enter"||t.keyCode===13)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}static{this.\u0275fac=function(e){return new(e||i)(v(W),v(xt))}}static{this.\u0275cmp=H({type:i,selectors:[["","nz-upload-btn",""]],viewQuery:function(e,n){if(e&1&&Q(Yt,7),e&2){let o;X(o=Y())&&(n.file=o.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(e,n){e&1&&U("drop",function(s){return n.onFileDrop(s)})("dragover",function(s){return n.onFileDrop(s)}),e&2&&(F("tabindex","0")("role","button"),E("ant-upload-disabled",n.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],standalone:!0,features:[K],attrs:Gt,ngContentSelectors:Qt,decls:3,vars:6,consts:[["file",""],["type","file",3,"change","multiple"]],template:function(e,n){if(e&1){let o=L();st(),f(0,"input",1,0),U("change",function(c){return y(o),w(n.onChange(c))}),C(),rt(2)}e&2&&(Z("display","none"),r("multiple",n.options.multiple),F("accept",n.options.accept)("directory",n.options.directory?"directory":null)("webkitdirectory",n.options.directory?"webkitdirectory":null))},encapsulation:2})}}return i})(),Zt=i=>!!i&&i.indexOf("image/")===0,I=200,Xt=(()=>{class i{get showPic(){return this.listType==="picture"||this.listType==="picture-card"}set items(t){this.list=t}genErr(t){return t.response&&typeof t.response=="string"?t.response:t.error&&t.error.statusText||this.locale.uploadError}extname(t){let e=t.split("/"),o=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(o)||[""])[0]}isImageUrl(t){if(Zt(t.type))return!0;let e=t.thumbUrl||t.url||"";if(!e)return!1;let n=this.extname(e);return/^data:image\//.test(e)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(n)?!0:/^data:/.test(e)?!1:!n}getIconType(t){return this.showPic?t.isUploading||!t.thumbUrl&&!t.url?"uploading":"thumbnail":""}previewImage(t){if(!Zt(t.type)||!this.platform.isBrowser)return R("");let e=this.document.createElement("canvas");e.width=I,e.height=I,e.style.cssText=`position: fixed; left: 0; top: 0; width: ${I}px; height: ${I}px; z-index: 9999; display: none;`,this.document.body.appendChild(e);let n=e.getContext("2d"),o=new Image,s=URL.createObjectURL(t);return o.src=s,M(o,"load").pipe(k(()=>{let{width:c,height:u}=o,m=I,D=I,x=0,_=0;c<u?(D=u*(I/c),_=-(D-m)/2):(m=c*(I/u),x=-(m-D)/2);try{n.drawImage(o,x,_,m,D)}catch{}let z=e.toDataURL();return this.document.body.removeChild(e),URL.revokeObjectURL(s),z}))}genThumb(){if(!this.platform.isBrowser)return;let t=window;!this.showPic||typeof document>"u"||typeof t>"u"||!t.FileReader||!t.File||this.list.filter(e=>e.originFileObj instanceof File&&e.thumbUrl===void 0).forEach(e=>{e.thumbUrl="";let n=(this.previewFile?this.previewFile(e):this.previewImage(e.originFileObj)).pipe(O(this.destroy$));this.ngZone.runOutsideAngular(()=>{n.subscribe(o=>{this.ngZone.run(()=>{e.thumbUrl=o,this.detectChanges()})})})})}showDownload(t){return!!(this.icons.showDownloadIcon&&t.status==="done")}fixData(){this.list.forEach(t=>{t.isUploading=t.status==="uploading",t.message=this.genErr(t),t.linkProps=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,t.isImageUrl=this.previewIsImage?this.previewIsImage(t):this.isImageUrl(t),t.iconType=this.getIconType(t),t.showDownload=this.showDownload(t)})}handlePreview(t,e){if(this.onPreview)return e.preventDefault(),this.onPreview(t)}handleRemove(t,e){e.preventDefault(),this.onRemove&&this.onRemove(t)}handleDownload(t){typeof this.onDownload=="function"?this.onDownload(t):t.url&&window.open(t.url)}constructor(t,e,n){this.cdr=t,this.ngZone=e,this.platform=n,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.document=V(mt),this.destroy$=new q}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}static{this.\u0275fac=function(e){return new(e||i)(v(ct),v(W),v(tt))}}static{this.\u0275cmp=H({type:i,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(e,n){e&2&&E("ant-upload-list-rtl",n.dir==="rtl")("ant-upload-list-text",n.listType==="text")("ant-upload-list-picture",n.listType==="picture")("ant-upload-list-picture-card",n.listType==="picture-card")},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],standalone:!0,features:[ot,K],decls:2,vars:0,consts:[["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[3,"class"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],[1,"ant-upload-list-item-actions"],[1,"ant-upload-list-item-progress"],[1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file","href"],[1,"ant-upload-text-icon"],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"click","href"],[1,"ant-upload-list-item-image",3,"src"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","loading"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href"],[1,"ant-upload-list-item-name"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"click","href"],[1,"ant-upload-list-item-name",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle"],["target","_blank","rel","noopener noreferrer",3,"click","href","ngStyle"],["nz-icon","","nzType","eye"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(e,n){e&1&&vt(0,Me,20,14,"div",6,Tt),e&2&&Ft(n.list)},dependencies:[qt,At,_t,Pt,Et,jt,Vt,kt,Lt,Wt,Ht],encapsulation:2,data:{animation:[Mt("itemState",[ht(":enter",[it({height:"0",width:"0",opacity:0}),ut(150,it({height:"*",width:"*",opacity:1}))]),ht(":leave",[ut(150,it({height:"0",width:"0",opacity:0}))])])]},changeDetection:0})}}return i})(),si=(()=>{class i{set nzShowUploadList(t){this._showUploadList=typeof t=="boolean"?$t(t):t}get nzShowUploadList(){return this._showUploadList}zipOptions(){typeof this.nzShowUploadList=="boolean"&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});let t=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&t.findIndex(e=>e.name==="limit")===-1&&t.push({name:"limit",fn:e=>e.slice(-this.nzLimit)}),this.nzSize>0&&t.findIndex(e=>e.name==="size")===-1&&t.push({name:"size",fn:e=>e.filter(n=>n.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&t.findIndex(e=>e.name==="type")===-1){let e=this.nzFileType.split(",");t.push({name:"type",fn:n=>n.filter(o=>~e.indexOf(o.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:t,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(t,e,n,o){this.ngZone=t,this.cdr=e,this.i18n=n,this.directionality=o,this.destroy$=new q,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.document=V(mt),this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new at,this.nzFileListChange=new at,this.platform=V(tt),this.onStart=s=>{this.nzFileList||(this.nzFileList=[]);let c=this.fileToObject(s);c.status="uploading",this.nzFileList=this.nzFileList.concat(c),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:c,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(s,c)=>{let u=this.nzFileList,m=this.getFileItem(c,u);m.percent=s.percent,this.nzChange.emit({event:s,file:A({},m),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(s,c)=>{let u=this.nzFileList,m=this.getFileItem(c,u);m.status="done",m.response=s,this.nzChange.emit({file:A({},m),fileList:u,type:"success"}),this.detectChangesList()},this.onError=(s,c)=>{let u=this.nzFileList,m=this.getFileItem(c,u);m.error=s,m.status="error",this.nzChange.emit({file:A({},m),fileList:u,type:"error"}),this.detectChangesList()},this.onRemove=s=>{this.uploadComp.abort(s),s.status="removed";let c=typeof this.nzRemove=="function"?this.nzRemove(s):this.nzRemove==null?!0:this.nzRemove;(c instanceof N?c:R(c)).pipe(ft(u=>u)).subscribe(()=>{this.nzFileList=this.removeFileItem(s,this.nzFileList),this.nzChange.emit({file:s,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(t){return{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.filename||t.name,size:t.size,type:t.type,uid:t.uid,response:t.response,error:t.error,percent:0,originFileObj:t}}getFileItem(t,e){return e.filter(n=>n.uid===t.uid)[0]}removeFileItem(t,e){return e.filter(n=>n.uid!==t.uid)}fileDrop(t){t.type!==this.dragState&&(this.dragState=t.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let t=[];this.nzType==="drag"?(this.nzFileList.some(e=>e.status==="uploading")&&t.push(`${this.prefixCls}-drag-uploading`),this.dragState==="dragover"&&t.push(`${this.prefixCls}-drag-hover`)):t=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...t,this.nzDisabled&&`${this.prefixCls}-disabled`||"",this.dir==="rtl"&&`${this.prefixCls}-rtl`||""].filter(e=>!!e),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(O(this.destroy$)).subscribe(t=>{this.dir=t,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe(O(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.platform.FIREFOX&&this.ngZone.runOutsideAngular(()=>M(this.document.body,"drop").pipe(O(this.destroy$)).subscribe(t=>{t.preventDefault(),t.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(e){return new(e||i)(v(W),v(ct),v(Bt),v(St))}}static{this.\u0275cmp=H({type:i,selectors:[["nz-upload"]],viewQuery:function(e,n){if(e&1&&(Q(Ve,5),Q(je,5)),e&2){let o;X(o=Y())&&(n.uploadComp=o.first),X(o=Y())&&(n.listComp=o.first)}},hostVars:2,hostBindings:function(e,n){e&2&&E("ant-upload-picture-card-wrapper",n.nzListType==="picture-card")},inputs:{nzType:"nzType",nzLimit:[2,"nzLimit","nzLimit",dt],nzSize:[2,"nzSize","nzSize",dt],nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:[2,"nzDirectory","nzDirectory",S],nzOpenFileDialogOnClick:[2,"nzOpenFileDialogOnClick","nzOpenFileDialogOnClick",S],nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:[2,"nzDisabled","nzDisabled",S],nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:[2,"nzMultiple","nzMultiple",S],nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:[2,"nzShowButton","nzShowButton",S],nzWithCredentials:[2,"nzWithCredentials","nzWithCredentials",S],nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],standalone:!0,features:[yt,ot,K],ngContentSelectors:Qt,decls:8,vars:1,consts:[["list",""],["con",""],["btn",""],["listComp",""],["uploadComp",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],[3,"ngTemplateOutlet"],[3,"drop","dragover","dragleave","ngClass"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(e,n){e&1&&(st(),p(0,We,2,2,"ng-template",null,0,b)(2,Ze,1,0,"ng-template",null,1,b)(4,Xe,4,5,"ng-template",null,2,b)(6,Je,6,4)(7,ai,2,1)),e&2&&(d(6),h(n.nzType==="drag"?6:7))},dependencies:[Xt,_t,bt,li],encapsulation:2,changeDetection:0})}}return i})(),ki=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=zt({type:i})}static{this.\u0275inj=Ct({imports:[si,Xt]})}}return i})();export{si as a,ki as b};
