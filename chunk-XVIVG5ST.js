import{$a as j,Ba as b,De as Q,Ga as c,H as S,N as D,Oa as v,Qa as C,Qf as X,Rd as K,Rf as Y,Sa as z,Sf as ee,Sg as ne,Tf as te,Ua as P,W as N,Wb as G,Za as p,_a as R,a as r,aa as x,ae as Z,b as I,bb as L,da as g,ea as m,fc as _,gb as k,ib as $,ja as E,jb as H,k as l,ka as w,kb as U,lb as d,mb as h,me as q,na as A,nb as a,oa as O,ob as V,pb as W,qa as F,rb as B,ub as y,ue as J,wb as T}from"./chunk-JMSH6HTP.js";var ie=(t,o)=>({$implicit:t,data:o});function se(t,o){t&1&&a(0,"nz-icon",3)}function oe(t,o){t&1&&a(0,"nz-icon",4)}function ae(t,o){t&1&&a(0,"nz-icon",5)}function re(t,o){t&1&&a(0,"nz-icon",6)}function ce(t,o){t&1&&a(0,"nz-icon",7)}function le(t,o){if(t&1&&(V(0),a(1,"span",9),W()),t&2){let e=T();c(),p("innerHTML",e.instance.content,b)}}function me(t,o){if(t&1){let e=B();d(0,"nz-message",2),y("destroyed",function(i){E(e);let s=T();return w(s.remove(i.id,i.userAction))}),h()}if(t&2){let e=o.$implicit;p("instance",e)}}var pe=0,M=class{overlay;injector;container;nzSingletonService=m(Q);constructor(o,e){this.overlay=o,this.injector=e}remove(o){this.container&&(o?this.container.remove(o):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${pe++}`}withContainer(o){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;let n=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),i=new q(o,null,this.injector),s=n.attach(i),f=n.hostElement;return f.style.zIndex="1010",e||(this.container=e=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),n.dispose()})),e}},de=(()=>{class t{config;instances=[];_afterAllInstancesRemoved=new l;afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable();cdr=m(_);nzConfigService=m(Z);destroy$=new l;ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){let n=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,n],this.readyInstances(),n}remove(e,n=!1){this.instances.map((i,s)=>({index:s,instance:i})).filter(({instance:i})=>i.messageId===e).forEach(({index:i,instance:s})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(s,n),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new l,e}onRemove(e,n){e.onClose.next(n),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:n,nzAnimate:i,nzPauseOnHover:s}=this.config;return r({nzDuration:n,nzAnimate:i,nzPauseOnHover:s},e)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=C({type:t})}return t})(),he=(()=>{class t{cdr=m(_);animationStateChanged=new l;options;autoClose;closeTimer;userAction=!1;eraseTimer;eraseTimingStart;eraseTTL;ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(S(e=>e.phaseName==="done"&&e.toState==="leave"),D(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=C({type:t})}return t})(),ue=(()=>{class t extends he{instance;destroyed=new F;index;static \u0275fac=(()=>{let e;return function(i){return(e||(e=A(t)))(i||t)}})();static \u0275cmp=v({type:t,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[z],decls:9,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML"]],template:function(n,i){if(n&1&&(d(0,"div",0),y("@moveUpMotion.done",function(f){return i.animationStateChanged.next(f)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),d(1,"div",1)(2,"div",2),P(3,se,1,0,"nz-icon",3)(4,oe,1,0,"nz-icon",4)(5,ae,1,0,"nz-icon",5)(6,re,1,0,"nz-icon",6)(7,ce,1,0,"nz-icon",7)(8,le,2,1,"ng-container",8),h()()()),n&2){let s;p("@moveUpMotion",i.instance.state),c(2),L("ant-message-"+i.instance.type),c(),k((s=i.instance.type)==="success"?3:s==="info"?4:s==="warning"?5:s==="error"?6:s==="loading"?7:-1),c(5),p("nzStringTemplateOutlet",i.instance.content)("nzStringTemplateOutletContext",G(6,ie,i,i.instance.options==null?null:i.instance.options.nzData))}},dependencies:[Y,X,te,ee],encapsulation:2,data:{animation:[ne]},changeDetection:0})}return t})(),u="message",fe={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},ge=(()=>{class t extends de{dir=this.nzConfigService.getConfigForComponent(u)?.nzDirection||"ltr";top;constructor(){super(),this.updateConfig()}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(u).pipe(N(this.destroy$)).subscribe(()=>{this.updateConfig(),this.dir=this.nzConfigService.getConfigForComponent(u)?.nzDirection||this.dir})}updateConfig(){this.config=r(r(r({},fe),this.config),this.nzConfigService.getConfigForComponent(u)),this.top=K(this.config.nzTop),this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=v({type:t,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[z],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(n,i){n&1&&(d(0,"div",0),H(1,me,1,1,"nz-message",1,$),h()),n&2&&(R("top",i.top),j("ant-message-rtl",i.dir==="rtl"),c(),U(i.instances))},dependencies:[ue],encapsulation:2,changeDetection:0})}return t})();var He=(()=>{class t extends M{componentPrefix="message-";constructor(e,n){super(e,n)}success(e,n){return this.createInstance({type:"success",content:e},n)}error(e,n){return this.createInstance({type:"error",content:e},n)}info(e,n){return this.createInstance({type:"info",content:e},n)}warning(e,n){return this.createInstance({type:"warning",content:e},n)}loading(e,n){return this.createInstance({type:"loading",content:e},n)}create(e,n,i){return this.createInstance({type:e,content:n},i)}createInstance(e,n){return this.container=this.withContainer(ge),this.container.create(I(r({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:n}))}static \u0275fac=function(n){return new(n||t)(g(J),g(O))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{M as a,de as b,he as c,He as d};
