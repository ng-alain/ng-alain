import{V as g}from"./chunk-NN3D3XR2.js";import{$ as C,Eb as k,F as v,Ka as F,La as d,Qa as B,V as b,Vb as _,Wb as A,Xb as a,a as y,aa as D,ad as z,bd as N,da as r,fa as x,ga as w,ha as M,hd as Z,k as p,la as I,oc as E,q as f,qa as O,sb as j,ta as l,tb as G,ua as S,ub as $,va as T}from"./chunk-5APSEXGJ.js";var U=["container"],J=(()=>{class e{get cog(){return this._cog}set cog(t){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},t)}constructor(){this.cogSrv=r(N),this.lazySrv=r(z),this.loading=!1,this.loaded=!1,this.notify$=new p,this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),W=(()=>{class e{get chart(){return this._chart}get winG2(){return window.G2}constructor(){this.srv=r(J),this.el=r(T),this.ngZone=r(S),this.platform=r(Z),this.cdr=r(_),this.repaint=!0,this.destroy$=new p,this.loaded=!1,this.delay=0,this.ready=new l,this.theme=this.srv.cog.theme,this.srv.notify.pipe(b(this.destroy$),v(()=>!this.loaded)).subscribe(()=>this.load())}changeData(){}onInit(){}onChanges(t){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(t){if(this.onChanges(t),this.onlyChangeData?this.onlyChangeData(t):Object.keys(t).length===1&&!!t.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=M({type:e,viewQuery:function(i,o){if(i&1&&j(U,7),i&2){let h;G(h=$())&&(o.node=h.first)}},inputs:{repaint:[2,"repaint","repaint",A],delay:[2,"delay","delay",a],theme:"theme"},outputs:{ready:"ready"},features:[d,I]})}}return f([g()],e.prototype,"load",null),f([g()],e.prototype,"destroyChart",null),e})();function Q(e,L){let t=y({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},L);return e==="mini"&&(t.position="top",t.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},t.itemTpl="<li>{value}</li>",t.offset=8),t}var Ct=(()=>{class e extends W{constructor(){super(...arguments),this.color="#1890FF",this.height=0,this.borderWidth=5,this.padding=[8,8,8,8],this.data=[],this.yTooltipSuffix="",this.tooltipType="default",this.clickItem=new l}install(){let{el:t,height:i,padding:o,yTooltipSuffix:h,tooltipType:P,theme:R,color:V,borderWidth:q}=this,n=this._chart=new this.winG2.Chart({container:t.nativeElement,autoFit:!0,height:i,padding:o,theme:R});n.scale({x:{type:"cat"},y:{min:0}}),n.legend(!1),n.axis(!1),n.tooltip(Q(P,{showCrosshairs:!1})),n.interval().position("x*y").color("x*y",(s,c)=>{let u=this.data.find(m=>m.x===s&&m.y===c);return u&&u.color?u.color:V}).size(q).tooltip("x*y",(s,c)=>({name:s,value:c+h})),n.on("interval:click",s=>{this.ngZone.run(()=>this.clickItem.emit({item:s.data?.data,ev:s}))}),this.ready.next(n),this.changeData(),n.render()}changeData(){let{_chart:t,data:i}=this;!t||!Array.isArray(i)||i.length<=0||t.changeData(i)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=O(e)))(o||e)}})()}static{this.\u0275cmp=x({type:e,selectors:[["g2-mini-bar"]],hostVars:2,hostBindings:function(i,o){i&2&&B("height",o.height,"px")},inputs:{color:"color",height:[2,"height","height",a],borderWidth:[2,"borderWidth","borderWidth",a],padding:"padding",data:"data",yTooltipSuffix:"yTooltipSuffix",tooltipType:"tooltipType"},outputs:{clickItem:"clickItem"},exportAs:["g2MiniBar"],standalone:!0,features:[d,F,k],decls:0,vars:0,template:function(i,o){},encapsulation:2,changeDetection:0})}}return e})();var Dt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=w({type:e})}static{this.\u0275inj=D({imports:[E]})}}return e})();export{W as a,Q as b,Ct as c,Dt as d};
