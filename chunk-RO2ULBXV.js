import{a as cn}from"./chunk-ZCFCRHLZ.js";import{c as Mn}from"./chunk-2YIPRNQO.js";import"./chunk-JN2ZHM3A.js";import{d as ht}from"./chunk-3NNAJAIS.js";import{B as oe,F as re,G as fn,H as ae,I as hn,J as gn,K as se,N as le,c as V,e as Xo,g as U,i as en,j as tn,k as on,l as nn,m as rn,n as an,o as Z,q as X,t as Y,u as pn,v as Zt,w as $,y as dn}from"./chunk-IIX5IJBT.js";import{A,Aa as un,B as L,Ba as J,Ca as Ct,Da as vt,E as k,Ea as K,Fa as Xt,Ga as At,Ha as Yt,Ia as Qt,Ja as ee,K as O,La as ie,M as H,Pa as ne,Q as G,R as qo,Ra as zn,Sa as me,V as Zo,Va as ue,X as j,Y as Yo,_ as Qo,ba as Jo,cb as pe,da as $o,ea as W,eb as de,gb as ce,i as gt,k as zt,ka as Ci,l as It,la as vi,ma as q,n as Pt,na as Ko,oa as F,p as Mt,pa as sn,q as Rt,r as Uo,ta as Nt,wa as ln,xa as mn,za as Q}from"./chunk-4WSZISC2.js";import{$b as Ce,$f as zi,Ad as ko,Ba as fo,Bd as ji,Cd as Wi,D as ao,Da as ho,Dc as Bt,Fb as vo,Ga as p,Gb as _o,Gc as xo,H as ki,Hb as St,Hg as Go,Ia as go,Ib as ui,Ic as Fo,Jb as So,Jh as Wo,L as Oi,Lc as Bo,Mb as f,Nb as kt,Oa as y,Ob as we,P as so,Pa as ei,Qa as mi,Qb as ze,R as lo,Rb as Me,Sb as Ne,Sh as _e,Tc as pi,Th as te,Ua as Gt,W as Vi,Xb as ii,Yg as jo,Za as jt,Zg as P,a as xe,aa as Et,ac as oi,ag as T,ba as Kt,bg as Oo,ca as mo,cb as Ee,cd as Io,d as Pn,dd as Po,ea as N,eb as De,ec as xt,f as oo,fb as Dt,fc as Ft,fd as Ro,fg as Vo,g as no,hb as wt,hc as yo,hd as di,hg as I,ia as D,ib as Tt,id as ci,ig as he,ih as R,j as Jt,ja as w,jb as g,jg as ve,k as Li,ka as Hi,kb as u,kc as bo,l as ai,lb as d,lg as ge,mb as fe,mc as ni,mg as x,na as uo,nb as Wt,nc as _,ob as Ut,oc as Gi,pb as ti,pd as Ao,pg as Ho,ph as Mi,q as ro,qa as po,qb as zo,ra as Lt,rb as Mo,rc as Eo,sa as Ht,tb as Fe,tc as Do,td as fi,u as $t,uc as wo,ud as qt,vb as v,vc as To,vd as hi,xa as li,xb as b,xd as Lo,xh as Ni,y as si,yb as No,yd as gi,za as co,zb as Co}from"./chunk-A4VBKEWU.js";var Yi=Pn((Zi,Xi)=>{"use strict";(function(n,l){typeof define=="function"&&define.amd?define([],l):typeof Zi<"u"?l():(l(),n.FileSaver={})})(Zi,function(){"use strict";function n(h,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function l(h,o,a){var r=new XMLHttpRequest;r.open("GET",h),r.responseType="blob",r.onload=function(){m(r.response,o,a)},r.onerror=function(){console.error("could not download file")},r.send()}function e(h){var o=new XMLHttpRequest;o.open("HEAD",h,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function t(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(o)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(h,o,a){var r=i.URL||i.webkitURL,c=document.createElement("a");o=o||h.name||"download",c.download=o,c.rel="noopener",typeof h=="string"?(c.href=h,c.origin===location.origin?t(c):e(c.href)?l(h,o,a):t(c,c.target="_blank")):(c.href=r.createObjectURL(h),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){t(c)},0))}:"msSaveOrOpenBlob"in navigator?function(h,o,a){if(o=o||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(n(h,a),o);else if(e(h))l(h,o,a);else{var r=document.createElement("a");r.href=h,r.target="_blank",setTimeout(function(){t(r)})}}:function(h,o,a,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof h=="string")return l(h,o,a);var c=h.type==="application/octet-stream",z=/constructor/i.test(i.HTMLElement)||i.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||c&&z||s)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var ye=M.result;ye=C?ye:ye.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=ye:location=ye,r=null},M.readAsDataURL(h)}else{var E=i.URL||i.webkitURL,S=E.createObjectURL(h);r?r.location=S:location.href=S,r=null,setTimeout(function(){E.revokeObjectURL(S)},4e4)}});i.saveAs=m.saveAs=m,typeof Xi<"u"&&(Xi.exports=m)})});var _i=class n{constructor(){this.aclSrv=N(gi);this.menuSrv=N(Mi);this.full=!0;this.roleA="";this.roleB=""}get data(){return this.aclSrv.data}reMenu(){this.menuSrv.resume()}toggleFull(){this.full=!this.full,this.aclSrv.setFull(this.full),this.reMenu()}toggleRoleA(){this.full=!1,this.roleA=this.roleA==="role-a"?"":"role-a",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleA]),this.reMenu()}toggleRoleB(){this.full=!1,this.roleB=this.roleB==="role-b"?"":"role-b",this.aclSrv.setFull(this.full),this.aclSrv.setRole([this.roleB]),this.reMenu()}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-acl"]],decls:32,vars:14,consts:[[1,"alain-default__content-title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nzTitle","\u6309\u94AE\u7C92\u5EA6"],["nz-button","",3,"acl"],["nz-button","",1,"ml-sm",3,"acl"],["nzTitle","\u5168\u91CF"],["nz-button","",3,"click"],[1,"pt-md"],["nzTitle","\u89D2\u8272[role-a]"],["nzTitle","\u89D2\u8272[role-b]"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," ACL \u8BBF\u95EE\u63A7\u5236 "),u(3,"small"),f(4,"\u6CE8\u610F\u89C2\u5BDF\u5DE6\u8FB9\u7684\u83DC\u5355\uFF1BACLService\u63D0\u4F9B\u4E00\u4E2A\u5B8C\u6574\u7684\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\u7684\u670D\u52A1\uFF0C\u82E5\u9700\u8981\u652F\u6301\u8DEF\u7531\u5B88\u536B\uFF0C\u8BF7\u914D\u5408ACLService\u4E0ERoute Guard\u914D\u5408\u7B80\u4FBF\u5B9E\u73B0\u3002"),d()()(),u(5,"div",1)(6,"div",2)(7,"nz-card",3),f(8),xt(9,"json"),u(10,"button",4),f(11,"role-a"),d(),u(12,"button",5),f(13,"role-b"),d()()()(),u(14,"div",1)(15,"div",2)(16,"nz-card",6)(17,"button",7),v("click",function(){return t.toggleFull()}),u(18,"span"),f(19),d()(),u(20,"p",8),f(21,"\u5168\u91CF\u7C7B\u6307\u7CFB\u7EDF\u7BA1\u7406\u5458\u89D2\u8272\uFF0C\u65E0\u4EFB\u4F55\u53D7\u9650\u3002"),d()()(),u(22,"div",2)(23,"nz-card",9)(24,"button",7),v("click",function(){return t.toggleRoleA()}),u(25,"span"),f(26),d()()()(),u(27,"div",2)(28,"nz-card",10)(29,"button",7),v("click",function(){return t.toggleRoleB()}),u(30,"span"),f(31),d()()()()()),e&2&&(p(5),g("nzGutter",8),p(),g("nzSpan",24),p(2),we(" ACL\u539F\u59CB\u6570\u636E\uFF1A",Ft(9,12,t.data)," "),p(2),g("acl","role-a"),p(2),g("acl","role-b"),p(2),g("nzGutter",8),p(),g("nzSpan",8),p(4),we("",t.full?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),p(3),g("nzSpan",8),p(4),we("",t.roleA.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"),p(),g("nzSpan",8),p(4),we("",t.roleB.length>0?"\u79BB\u5F00":"\u8BBE\u7F6E","\u6743\u9650"))},dependencies:[A,L,oe,$,le,se,ae,ko,x,ge,he,ve,W,K,vt,Ct,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I,Bt],encapsulation:2})}};var Rn=new mo("DC_STORE_STORAGE_TOKEN",{providedIn:"root",factory:()=>new qi}),qi=class{platform=N(Wi);get(l){return this.platform.isBrowser?JSON.parse(localStorage.getItem(l)??"null")??null:null}set(l,e){return this.platform.isBrowser&&localStorage.setItem(l,JSON.stringify(e)),!0}remove(l){this.platform.isBrowser&&localStorage.removeItem(l)}},Nn=(()=>{class n{store=N(Rn);http=N(pi);platform=N(Wi);memory=new Map;notifyBuffer=new Map;meta=new Set;freqTick=3e3;freqTime;cog=N(qt).merge("cache",{mode:"promise",reName:"",prefix:"",meta_key:"__cache_meta"});constructor(){this.platform.isBrowser&&(this.loadMeta(),this.startExpireNotify())}pushMeta(e){this.meta.has(e)||(this.meta.add(e),this.saveMeta())}removeMeta(e){this.meta.has(e)&&(this.meta.delete(e),this.saveMeta())}loadMeta(){let e=this.store.get(this.cog.meta_key);e&&e.v&&e.v.forEach(t=>this.meta.add(t))}saveMeta(){let e=[];this.meta.forEach(t=>e.push(t)),this.store.set(this.cog.meta_key,{v:e,e:0})}getMeta(){return this.meta}set(e,t,i={}){if(!this.platform.isBrowser)return;let s=0,{type:m,expire:h}=this.cog;i=xe({type:m,expire:h},i),i.expire&&(s=Ho(new Date,i.expire).valueOf());let o=i.emitNotify!==!1;if(!(t instanceof Jt)){this.save(i.type,e,{v:t,e:s},o);return}return t.pipe(Vi(a=>{this.save(i.type,e,{v:a,e:s},o)}))}save(e,t,i,s=!0){e==="m"?this.memory.set(t,i):(this.store.set(this.cog.prefix+t,i),this.pushMeta(t)),s&&this.runNotify(t,"set")}get(e,t={}){if(!this.platform.isBrowser)return null;let i=t.mode!=="none"&&this.cog.mode==="promise",s=this.memory.has(e)?this.memory.get(e):this.store.get(this.cog.prefix+e);return!s||s.e&&s.e>0&&s.e<new Date().valueOf()?i?(this.cog.request?this.cog.request(e):this.http.get(e)).pipe(si(m=>Ao(m,this.cog.reName,m)),Vi(m=>this.set(e,m,{type:t.type,expire:t.expire,emitNotify:t.emitNotify}))):null:i?$t(s.v):s.v}getNone(e){return this.get(e,{mode:"none"})}tryGet(e,t,i={}){if(!this.platform.isBrowser)return null;let s=this.getNone(e);return s===null?t instanceof Jt?this.set(e,t,i):(this.set(e,t,i),t):$t(s)}has(e){return this.memory.has(e)||this.meta.has(e)}_remove(e,t){if(t&&this.runNotify(e,"remove"),this.memory.has(e)){this.memory.delete(e);return}this.store.remove(this.cog.prefix+e),this.removeMeta(e)}remove(e){this.platform.isBrowser&&this._remove(e,!0)}clear(){this.platform.isBrowser&&(this.notifyBuffer.forEach((e,t)=>this.runNotify(t,"remove")),this.memory.clear(),this.meta.forEach(e=>this.store.remove(this.cog.prefix+e)))}set freq(e){this.freqTick=Math.max(20,e),this.abortExpireNotify(),this.startExpireNotify()}startExpireNotify(){this.checkExpireNotify(),this.runExpireNotify()}runExpireNotify(){this.freqTime=setTimeout(()=>{this.checkExpireNotify(),this.runExpireNotify()},this.freqTick)}checkExpireNotify(){let e=[];this.notifyBuffer.forEach((t,i)=>{this.has(i)&&this.getNone(i)===null&&e.push(i)}),e.forEach(t=>{this.runNotify(t,"expire"),this._remove(t,!1)})}abortExpireNotify(){clearTimeout(this.freqTime)}runNotify(e,t){this.notifyBuffer.has(e)&&this.notifyBuffer.get(e).next({type:t,value:this.getNone(e)})}notify(e){if(!this.notifyBuffer.has(e)){let t=new ai(this.getNone(e));this.notifyBuffer.set(e,t)}return this.notifyBuffer.get(e).asObservable()}cancelNotify(e){this.notifyBuffer.has(e)&&(this.notifyBuffer.get(e).unsubscribe(),this.notifyBuffer.delete(e))}hasNotify(e){return this.notifyBuffer.has(e)}clearNotify(){this.notifyBuffer.forEach(e=>e.unsubscribe()),this.notifyBuffer.clear()}ngOnDestroy(){this.memory.clear(),this.abortExpireNotify(),this.clearNotify()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qr=new Bo(()=>({}));var Si=class n{constructor(){this.cache=N(Nn);this.msg=N(ht);this.KEY="user"}set(){this.cache.set(this.KEY,+new Date)}get(){this.msg.success(this.cache.getNone(this.KEY))}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-cache"]],decls:10,vars:0,consts:[[1,"alain-default__content-title"],["href","https://ng-alain.com/components/cache","target","_blank"],["nzTitle","Service"],["nz-button","",3,"click"],["nz-button","",1,"ml-sm",3,"click"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Cache \u7F13\u5B58, "),u(3,"a",1),f(4,"Document"),d()()(),u(5,"nz-card",2)(6,"button",3),v("click",function(){return t.set()}),f(7,"\u8BBE\u7F6E"),d(),u(8,"button",4),v("click",function(){return t.get()}),f(9,"\u83B7\u53D6"),d()())},dependencies:[A,L,oe,$,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I],encapsulation:2})}};var Cn=oo(Yi(),1);var vn=(()=>{class n{el=N(li).nativeElement;_http=N(Ni);httpData=_(void 0,{alias:"http-data"});httpBody=_(void 0,{alias:"http-body"});httpMethod=_("get",{alias:"http-method"});httpUrl=_.required({alias:"http-url"});fileName=_(void 0,{alias:"file-name"});pre=_();success=ni();error=ni();getDisposition(e){return(e??"").split(";").filter(i=>i.includes("=")).map(i=>{let s=i.split("="),m="UTF-8''",h=s[1];return h.startsWith(m)&&(h=h.substring(m.length)),{[s[0].trim()]:h}}).reduce((i,s)=>s,{})}isFileSaverSupported=!1;constructor(){try{this.isFileSaverSupported=!!new Blob}catch{}this.isFileSaverSupported||this.el.classList.add("down-file__not-support")}setDisabled(e){let t=this.el;t.disabled=e,t.classList[e?"add":"remove"]("down-file__disabled")}_click(e){return no(this,null,function*(){let t=this.pre();if(!this.isFileSaverSupported||typeof t=="function"&&!(yield t(e))){e.stopPropagation(),e.preventDefault();return}this.setDisabled(!0),this._http.request(this.httpMethod(),this.httpUrl(),{params:this.httpData()??{},responseType:"blob",observe:"response",body:this.httpBody()}).pipe(so(()=>this.setDisabled(!1))).subscribe({next:i=>{if(i.status!==200||i.body.size<=0){this.error.emit(i);return}let s=this.getDisposition(i.headers.get("content-disposition")),m=this.fileName();typeof m=="function"&&(m=m(i)),m=m||s["filename*"]||s.filename||i.headers.get("filename")||i.headers.get("x-filename"),(0,Cn.saveAs)(i.body,decodeURI(m)),this.success.emit(i)},error:i=>this.error.emit(i)})})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=mi({type:n,selectors:[["","down-file",""]],hostBindings:function(t,i){t&1&&v("click",function(m){return i._click(m)})},inputs:{httpData:[1,"http-data","httpData"],httpBody:[1,"http-body","httpBody"],httpMethod:[1,"http-method","httpMethod"],httpUrl:[1,"http-url","httpUrl"],fileName:[1,"file-name","fileName"],pre:[1,"pre"]},outputs:{success:"success",error:"error"},exportAs:["downFile"]})}return n})();function An(n,l){if(n&1&&(u(0,"button",2),f(1),d()),n&2){let e=l.$implicit,t=b();g("http-url",ii("assets/tmp/demo",e))("http-data",t.data),p(),we(" ",e," ")}}var yi=class n{constructor(){this.fileTypes=[".xlsx",".docx",".pptx",".pdf"];this.data={otherdata:1,time:new Date}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-down-file"]],decls:6,vars:0,consts:[[1,"alain-default__content-title"],["nzTitle","DEMO"],["nz-button","","down-file","","file-name","demo\u4E2D\u6587",1,"mr-sm",3,"http-data","http-url"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2,"Download a file"),d()(),u(3,"nz-card",1),wt(4,An,2,4,"button",2,Dt),d()),e&2&&(p(4),Tt(t.fileTypes))},dependencies:[A,L,oe,$,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I,vn],encapsulation:2})}};var Ln=n=>({params:n}),bi=class n{constructor(){this.params={};this.url="/user";this.searchSchema={properties:{no:{type:"string",title:"\u7F16\u53F7"}}};this.columns=[{title:"\u7F16\u53F7",index:"no"},{title:"\u8C03\u7528\u6B21\u6570",type:"number",index:"callNo"},{title:"\u5934\u50CF",type:"img",width:"50px",index:"avatar"},{title:"\u65F6\u95F4",type:"date",index:"updatedAt"}]}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-delon-form"]],decls:5,vars:8,consts:[["st",""],[3,"title"],["mode","search",3,"formSubmit","formReset","schema","formData"],[3,"data","columns","req"]],template:function(e,t){if(e&1){let i=Fe();fe(0,"page-header",1),u(1,"nz-card")(2,"sf",2),v("formSubmit",function(m){D(i);let h=St(4);return w(h.reset(m))})("formReset",function(){D(i);let m=St(4);return w(m.reset(t.params))}),d(),fe(3,"st",3,0),d()}e&2&&(g("title","Page Name"),p(2),g("schema",t.searchSchema)("formData",t.params),p(),g("data",t.url)("columns",t.columns)("req",oi(6,Ln,t.params)))},dependencies:[A,L,oe,dn,$,Zt,le,se,ae,fn,x,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I],encapsulation:2})}};var Ei=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-guard-admin"]],decls:2,vars:0,template:function(e,t){e&1&&(Wt(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Aadmin\u9875\u9762"),Ut())},encapsulation:2})}};var Di=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-guard-auth"]],decls:2,vars:0,template:function(e,t){e&1&&(Wt(0,"p"),f(1,"\u8FD9\u662F\u4E00\u4E2Auser1\u9875\u9762"),Ut())},encapsulation:2})}};var _n=()=>{let n=N(jo);return new Jt(l=>{n.confirm({nzTitle:"\u786E\u8BA4\u8981\u79BB\u5F00\u5417\uFF1F",nzContent:"\u4F60\u5DF2\u7ECF\u586B\u5199\u4E86\u90E8\u5206\u8868\u5355\u79BB\u5F00\u4F1A\u653E\u5F03\u5DF2\u7ECF\u586B\u5199\u7684\u5185\u5BB9\u3002",nzOkText:"\u79BB\u5F00",nzCancelText:"\u53D6\u6D88",nzOnOk:()=>{l.next(!0),l.complete()},nzOnCancel:()=>{l.next(!1),l.complete()}})})};var On=()=>["/delon/guard/leave"],Vn=()=>["/delon/guard/auth"],Hn=()=>["/delon/guard/admin"],wi=class n{constructor(){this.aclSrv=N(gi);this.menuSrv=N(Mi);this.router=N(di)}get data(){return this.aclSrv.data}setRole(l){this.aclSrv.setFull(!1),typeof l=="boolean"?this.aclSrv.setFull(l):this.aclSrv.set({role:[l]}),this.menuSrv.resume(),this.router.navigate(["/delon/guard"])}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-guard"]],decls:28,vars:9,consts:[[1,"alain-default__content-title"],["nz-button","",3,"routerLink"],[1,"ml-sm"],["nz-button","",3,"click"],[1,"mb-lg"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u8DEF\u7531\u5B88\u536B "),d()(),u(3,"nz-space-compact")(4,"button",1)(5,"span"),f(6,"\u79BB\u5F00\u786E\u8BA4\u9875"),d()()(),u(7,"nz-space-compact",2)(8,"button",3),v("click",function(){return t.setRole(!0)}),u(9,"span"),f(10,"\u8BBE\u7F6E\u7BA1\u7406\u5458"),d()(),u(11,"button",3),v("click",function(){return t.setRole("user1")}),u(12,"span"),f(13,"\u8BBE\u7F6E\u5458\u5DE51"),d()(),u(14,"button",3),v("click",function(){return t.setRole("user2")}),u(15,"span"),f(16,"\u8BBE\u7F6E\u5458\u5DE52"),d()()(),u(17,"nz-space-compact",2)(18,"button",1)(19,"span"),f(20,"\u9700\u8981user1"),d()(),u(21,"button",1)(22,"span"),f(23,"\u9700\u8981\u7BA1\u7406\u5458"),d()()(),u(24,"p",4),f(25),xt(26,"json"),d(),fe(27,"router-outlet")),e&2&&(p(4),g("routerLink",Ce(6,On)),p(14),g("routerLink",Ce(7,Vn)),p(3),g("routerLink",Ce(8,Hn)),p(4),we("\u5F53\u524DACL\u4FE1\u606F\uFF1A",Ft(26,4,t.data)))},dependencies:[A,L,ci,Ro,oe,$,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,j,ce,U,I,Vo,Bt],encapsulation:2})}};var Gn=()=>["/delon/guard"],Ti=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-guard-leave"]],decls:5,vars:3,consts:[["nz-button","",3,"nzType","routerLink"]],template:function(e,t){e&1&&(u(0,"p"),f(1,"\u79BB\u5F00\u65F6\u9700\u8981\u786E\u8BA4"),d(),u(2,"button",0)(3,"span"),f(4,"\u6211\u8981\u79BB\u5F00"),d()()),e&2&&(p(2),g("nzType","primary")("routerLink",Ce(2,Gn)))},dependencies:[A,L,ci,oe,$,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,j,ce,U,I],encapsulation:2})}};var Sn=(()=>{class n{scriptSrv=N(fi);cogSrv=N(qt);defaultConfig;_cog;pending=!1;_lodop=null;_init=new Li;_events=new Li;printBuffer=[];constructor(){this.defaultConfig=this.cogSrv.merge("lodop",{url:"http://localhost:8443/CLodopfuncs.js",name:"CLODOP",companyName:"",checkMaxCount:100}),this.cog=this.defaultConfig}get cog(){return this._cog}set cog(e){this._cog=xe(xe({},this.defaultConfig),e)}get events(){return this._events.asObservable()}get lodop(){return this._lodop?$t({ok:!0,lodop:this._lodop}):this.pending?this._init.asObservable():(this.request(),this._init.asObservable())}get printer(){this.check();let e=[],t=this._lodop.GET_PRINTER_COUNT();for(let i=0;i<t;i++)e.push(this._lodop.GET_PRINTER_NAME(i));return e}check(){if(!this._lodop)throw new Error("\u8BF7\u52A1\u5FC5\u5148\u8C03\u7528 lodop \u83B7\u53D6\u5BF9\u8C61")}request(){this.pending=!0;let e=new URL(this.cog.url);e.searchParams.set("name",this.cog.name);let t=e.toString(),i=this.cog.checkMaxCount,s=(h,o)=>{this._init.next({ok:h==="ok",status:h,error:o,lodop:this._lodop})},m=()=>{if(--i,this._lodop.webskt&&this._lodop.webskt.readyState===1)s("ok");else{if(i<0){s("check-limit");return}setTimeout(()=>m(),100)}};this.scriptSrv.loadScript(t).then(h=>{if(h.status!=="ok"){this.pending=!1,s("script-load-error",h[0]);return}let o=window;if(Object.prototype.hasOwnProperty.call(o,this.cog.name)&&(this._lodop=o[this.cog.name]),this._lodop===null){s("load-variable-name-error",{name:this.cog.name});return}this._lodop.SET_LICENSES(this.cog.companyName,this.cog.license,this.cog.licenseA,this.cog.licenseB),m()})}reset(){this._lodop=null,this.pending=!1,this.request()}attachCode(e,t,i){this.check(),i||(i=/LODOP\.([^(]+)\(([^\n]+)?\);/i),e.split(`
`).forEach(s=>{let m=i.exec(s.trim());if(!m)return;let h=this._lodop[m[1]];if(h){let o=null;try{o=new Function(`return [${m[2]}]`)()}catch{}if(o!=null&&Array.isArray(o)&&t)for(let a=0;a<o.length;a++)typeof o[a]=="string"&&(o[a]=o[a].replace(/{{(.*?)}}/g,(r,c)=>t[c.trim()]??""));h.apply(this._lodop,o)}})}design(){this.check();let e=this._lodop.PRINT_DESIGN();return new Promise(t=>{this._lodop.On_Return=(i,s)=>{e===i&&(this._lodop.On_Return=null,t(`${s}`))}})}printDo(){let e=this.printBuffer.shift();if(!e)return;this.attachCode(e.code,e.item,e.parser);let t=this._lodop.PRINT();this._lodop.On_Return=(i,s)=>{t===i&&(this._lodop.On_Return=null,this._events.next(xe({ok:s===!0,error:s===!0?null:s},e)),this.printDo())}}print(e,t,i){this.check(),t&&this.printBuffer.push(...(Array.isArray(t)?t:[t]).map(s=>({code:e,parser:i,item:s}))),this.printDo()}ngOnDestroy(){this._init.unsubscribe(),this._events.unsubscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jn(n,l){n&1&&(f(0," \u8BF7\u5148\u4E0B\u8F7D "),u(1,"a",5),f(2,"Lodop\u63D2\u4EF6"),d(),f(3,"\u3002 "))}function Wn(n,l){if(n&1&&(u(0,"nz-alert",3),Gt(1,jn,4,0,"ng-template",null,0,yo),d()),n&2){let e=St(2);g("nzType","warning")("nzMessage",e)}}function Un(n,l){if(n&1&&fe(0,"nz-option",11),n&2){let e=l.$implicit;g("nzLabel",e)("nzValue",e)}}function qn(n,l){if(n&1&&fe(0,"nz-option",11),n&2){let e=l.$implicit;g("nzLabel",e)("nzValue",e)}}function Zn(n,l){if(n&1){let e=Fe();u(0,"form",4)(1,"nz-form-item",6)(2,"nz-form-label",7),f(3,"\u6253\u5370\u670D\u52A1\u5668"),d(),u(4,"nz-form-control",7)(5,"nz-input-search",8),v("nzSearch",function(){D(e);let i=b();return w(i.reload(null))}),u(6,"input",9),Ne("ngModelChange",function(i){D(e);let s=b();return Me(s.cog.url,i)||(s.cog.url=i),w(i)}),d()()()(),u(7,"nz-form-item",6)(8,"nz-form-label",7),f(9,"\u6253\u5370\u673A"),d(),u(10,"nz-form-control",7)(11,"nz-select",10),Ne("ngModelChange",function(i){D(e);let s=b();return Me(s.cog.printer,i)||(s.cog.printer=i),w(i)}),v("ngModelChange",function(i){D(e);let s=b();return w(s.changePinter(i))}),wt(12,Un,1,2,"nz-option",11,Dt),d()()(),u(14,"nz-form-item",6)(15,"nz-form-label",7),f(16,"\u7EB8\u5F20\u7C7B\u578B"),d(),u(17,"nz-form-control",7)(18,"nz-select",12),Ne("ngModelChange",function(i){D(e);let s=b();return Me(s.cog.paper,i)||(s.cog.paper=i),w(i)}),wt(19,qn,1,2,"nz-option",11,Dt),d()()(),u(21,"nz-form-item",6)(22,"nz-form-label",7),f(23,"\u6253\u5370\u5185\u5BB9"),d(),u(24,"nz-form-control",7)(25,"textarea",13),Ne("ngModelChange",function(i){D(e);let s=b();return Me(s.cog.html,i)||(s.cog.html=i),w(i)}),d(),u(26,"div",14),f(27,"\u4EC5\u9650HTML\uFF0C\u66F4\u591A\u7C7B\u578B\u652F\u6301\u8BF7\u53C2\u8003\u5B98\u7F51"),d()()(),u(28,"nz-form-item",6)(29,"nz-form-control",15)(30,"button",16),v("click",function(){D(e);let i=b();return w(i.print(!0))}),f(31,"\u6253\u5370\u9884\u89C8"),d(),u(32,"button",16),v("click",function(){D(e);let i=b();return w(i.print())}),f(33,"\u76F4\u63A5\u6253\u5370"),d()()()()}if(n&2){let e=b();p(2),g("nzSm",6),p(2),g("nzSm",18),p(2),ze("ngModel",e.cog.url),p(2),g("nzSm",6),p(2),g("nzSm",18),p(),ze("ngModel",e.cog.printer),p(),Tt(e.pinters),p(3),g("nzSm",6),p(2),g("nzSm",18),p(),ze("ngModel",e.cog.paper),p(),Tt(e.papers),p(3),g("nzSm",6),p(2),g("nzSm",18),p(),ze("ngModel",e.cog.html),p(4),g("nzSm",18)("nzOffset",6),p(),g("nzLoading",e.printing),p(2),g("nzLoading",e.printing)}}var xi=class n{constructor(){this.lodopSrv=N(Sn);this.msg=N(ht);this.cog={url:"https://localhost:8443/CLodopfuncs.js",printer:"",paper:"",html:`
      <h1>Title</h1>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
      <p>\u8FD9~\uFF01@#\uFFE5%\u2026\u2026&*\uFF08\uFF09\u2014\u2014sdilfjnvn</p>
    `};this.error=!1;this.lodop=null;this.pinters=[];this.papers=[];this.printing=!1;this.lodopSrv.lodop.subscribe(({lodop:l,ok:e})=>{if(!e){this.error=!0;return}this.error=!1,this.msg.success("\u6253\u5370\u673A\u52A0\u8F7D\u6210\u529F"),this.lodop=l,this.pinters=this.lodopSrv.printer})}reload(l={url:"https://localhost:8443/CLodopfuncs.js"}){this.pinters=[],this.papers=[],this.cog.printer="",this.cog.paper="",this.lodopSrv.cog=xe(xe({},this.cog),l),this.error=!1,l===null&&this.lodopSrv.reset()}changePinter(l){this.lodop!=null&&(this.papers=this.lodop.GET_PAGESIZES_LIST(l,`
`).split(`
`))}print(l=!1){let e=this.lodop;e.PRINT_INITA(10,20,810,610,"\u6D4B\u8BD5C-Lodop\u8FDC\u7A0B\u6253\u5370\u56DB\u6B65\u9AA4"),e.SET_PRINTER_INDEXA(this.cog.printer),e.SET_PRINT_PAGESIZE(0,0,0,this.cog.paper),e.ADD_PRINT_TEXT(1,1,300,200,"\u4E0B\u9762\u8F93\u51FA\u7684\u662F\u672C\u9875\u6E90\u4EE3\u7801\u53CA\u5176\u5C55\u73B0\u6548\u679C\uFF1A"),e.ADD_PRINT_TEXT(20,10,"90%","95%",this.cog.html),e.SET_PRINT_STYLEA(0,"ItemType",4),e.NEWPAGEA(),e.ADD_PRINT_HTM(20,10,"90%","95%",this.cog.html),l?e.PREVIEW():e.PRINT()}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-print"]],decls:10,vars:2,consts:[["message",""],[1,"alain-default__content-title"],["href","https://ng-alain.com/components/lodop","target","_blank"],[3,"nzType","nzMessage"],["nz-form",""],["href","http://c-lodop.com/download.html","target","_blank"],["nz-row",""],["nz-col","",3,"nzSm"],["nzEnterButton","\u91CD\u65B0\u52A0\u8F7D\u6253\u5370\u673A",3,"nzSearch"],["nz-input","","nzPlaceHolder","https://localhost:8443/CLodopfuncs.js","name","url",3,"ngModelChange","ngModel"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u6253\u5370\u673A","nzShowSearch","","nzAllowClear","","name","printer",2,"width","90%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue"],["nzPlaceHolder","\u8BF7\u9009\u62E9\u7EB8\u5F20\u7C7B\u578B","nzShowSearch","","nzAllowClear","","name","paper",2,"width","90%",3,"ngModelChange","ngModel"],["nz-input","","name","html","nzAutosize","",3,"ngModelChange","ngModel"],["nz-form-extra",""],["nz-col","",3,"nzSm","nzOffset"],["nz-button","",3,"click","nzLoading"]],template:function(e,t){e&1&&(u(0,"div",1)(1,"h1"),f(2," Lodop\u6253\u5370 "),u(3,"small"),f(4," \u66F4\u591A\u4F53\u9A8C\u8BF7\u81F3 "),u(5,"a",2),f(6,"NG-ALAIN.com"),d()()()(),u(7,"nz-card"),Ee(8,Wn,3,2,"nz-alert",3),Ee(9,Zn,34,16,"form",4),d()),e&2&&(p(8),De(t.error?8:-1),p(),De(t.error?-1:9))},dependencies:[A,Rt,gt,zt,It,Mt,Pt,L,oe,$,le,se,ae,x,ge,he,ve,W,K,vt,Ct,O,G,de,q,Ci,vi,T,k,me,zn,P,Z,R,ne,Q,Nt,mn,ln,sn,J,Y,X,H,re,pe,ie,V,ee,At,Xt,Qt,Yt,ue,F,te,_e,j,ce,U,I],encapsulation:2})}};var Xn=["canvas"],Yn=["image"];function Qn(n,l){if(n&1&&ti(0,"img",3,1),n&2){let e=b();jt("src",e.icon(),ho)}}function Jn(n,l){if(n&1&&(Hi(),ti(0,"image",2)),n&2){let e,t,i,s,m,h=b();jt("href",(e=h.imageSettings())==null?null:e.src)("height",(t=h.calculatedImageSettings())==null?null:t.h)("width",(i=h.calculatedImageSettings())==null?null:i.w)("x",h.getImageX())("y",h.getImageY())("opacity",(s=h.calculatedImageSettings())==null?null:s.opacity)("crossOrigin",(m=h.calculatedImageSettings())==null?null:m.crossOrigin)}}var $n=()=>({x:0,y:0,h:0,w:0,excavation:null,opacity:1,crossOrigin:""});function Kn(n,l){if(n&1&&(zo(0),f(1),Mo()),n&2){let e=b(2);p(),kt(e.nzStatusRender())}}function er(n,l){if(n&1&&(u(0,"div",0),Gt(1,Kn,2,1,"ng-container",1),d()),n&2){let e=b();p(),g("nzStringTemplateOutlet",e.nzStatusRender())}}function tr(n,l){n&1&&fe(0,"nz-spin")}function ir(n,l){if(n&1){let e=Fe();u(0,"div")(1,"p",2),f(2),d(),u(3,"button",3),v("click",function(){D(e);let i=b(2);return w(i.reloadQRCode())}),fe(4,"nz-icon",4),u(5,"span"),f(6),d()()()}if(n&2){let e=b(2);p(2),kt(e.locale().expired),p(4),kt(e.locale().refresh)}}function or(n,l){if(n&1&&(u(0,"div")(1,"p",2),f(2),d()()),n&2){let e=b(2);p(2),kt(e.locale().scanned)}}function nr(n,l){if(n&1&&(u(0,"div",0),Ee(1,tr,1,0,"nz-spin")(2,ir,7,2,"div")(3,or,3,1,"div"),d()),n&2){let e,t=b();p(),De((e=t.nzStatus())==="loading"?1:e==="expired"?2:e==="scanned"?3:-1)}}function rr(n,l){if(n&1&&fe(0,"nz-qrcode-canvas",5),n&2){let e=b(2);g("icon",e.nzIcon())("margin",e.margin())("cells",e.cells())("numCells",e.numCells())("calculatedImageSettings",e.calculatedImageSettings())("size",e.nzSize())("color",e.nzColor())("bgColor",e.nzBgColor())}}function ar(n,l){if(n&1&&fe(0,"nz-qrcode-svg",6),n&2){let e=b(2);g("color",e.nzColor())("bgColor",e.nzBgColor())("icon",e.nzIcon())("margin",e.margin())("cells",e.cells())("numCells",e.numCells())("imageSettings",e.imageSettings())("calculatedImageSettings",e.calculatedImageSettings()||Ce(9,$n))("size",e.nzSize())}}function sr(n,l){if(n&1&&Ee(0,rr,1,8,"nz-qrcode-canvas",5)(1,ar,1,10,"nz-qrcode-svg",6),n&2){let e,t=b();De((e=t.nzType())==="canvas"?0:e==="svg"?1:-1)}}var Ot;(function(n){let l=(()=>{class m{version;errorCorrectionLevel;static encodeText(o,a){let r=n.QrSegment.makeSegments(o);return m.encodeSegments(r,a)}static encodeBinary(o,a){let r=n.QrSegment.makeBytes(o);return m.encodeSegments([r],a)}static encodeSegments(o,a,r=1,c=40,z=-1,C=!0){if(!(m.MIN_VERSION<=r&&r<=c&&c<=m.MAX_VERSION)||z<-1||z>7)throw new RangeError("Invalid value");let M,E;for(M=r;;M++){let B=m.getNumDataCodewords(M,a)*8,be=s.getTotalBits(o,M);if(be<=B){E=be;break}if(M>=c)throw new RangeError("Data too long")}for(let B of[m.Ecc.MEDIUM,m.Ecc.QUARTILE,m.Ecc.HIGH])C&&E<=m.getNumDataCodewords(M,B)*8&&(a=B);let S=[];for(let B of o){e(B.mode.modeBits,4,S),e(B.numChars,B.mode.numCharCountBits(M),S);for(let be of B.getData())S.push(be)}i(S.length==E);let ye=m.getNumDataCodewords(M,a)*8;i(S.length<=ye),e(0,Math.min(4,ye-S.length),S),e(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let B=236;S.length<ye;B^=253)e(B,8,S);let bt=[];for(;bt.length*8<S.length;)bt.push(0);return S.forEach((B,be)=>bt[be>>>3]|=B<<7-(be&7)),new m(M,a,bt,z)}size;mask;modules=[];isFunction=[];constructor(o,a,r,c){if(this.version=o,this.errorCorrectionLevel=a,o<m.MIN_VERSION||o>m.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let z=[];for(let M=0;M<this.size;M++)z.push(!1);for(let M=0;M<this.size;M++)this.modules.push(z.slice()),this.isFunction.push(z.slice());this.drawFunctionPatterns();let C=this.addEccAndInterleave(r);if(this.drawCodewords(C),c==-1){let M=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);let S=this.getPenaltyScore();S<M&&(c=E,M=S),this.applyMask(E)}}i(c>=0&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}getModule(o,a){return o>=0&&o<this.size&&a>=0&&a<this.size&&this.modules[a][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let o=this.getAlignmentPatternPositions(),a=o.length;for(let r=0;r<a;r++)for(let c=0;c<a;c++)r==0&&c==0||r==0&&c==a-1||r==a-1&&c==0||this.drawAlignmentPattern(o[r],o[c]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){let a=this.errorCorrectionLevel.formatBits<<3|o,r=a;for(let z=0;z<10;z++)r=r<<1^(r>>>9)*1335;let c=(a<<10|r)^21522;i(c>>>15==0);for(let z=0;z<=5;z++)this.setFunctionModule(8,z,t(c,z));this.setFunctionModule(8,7,t(c,6)),this.setFunctionModule(8,8,t(c,7)),this.setFunctionModule(7,8,t(c,8));for(let z=9;z<15;z++)this.setFunctionModule(14-z,8,t(c,z));for(let z=0;z<8;z++)this.setFunctionModule(this.size-1-z,8,t(c,z));for(let z=8;z<15;z++)this.setFunctionModule(8,this.size-15+z,t(c,z));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let r=0;r<12;r++)o=o<<1^(o>>>11)*7973;let a=this.version<<12|o;i(a>>>18==0);for(let r=0;r<18;r++){let c=t(a,r),z=this.size-11+r%3,C=Math.floor(r/3);this.setFunctionModule(z,C,c),this.setFunctionModule(C,z,c)}}drawFinderPattern(o,a){for(let r=-4;r<=4;r++)for(let c=-4;c<=4;c++){let z=Math.max(Math.abs(c),Math.abs(r)),C=o+c,M=a+r;C>=0&&C<this.size&&M>=0&&M<this.size&&this.setFunctionModule(C,M,z!=2&&z!=4)}}drawAlignmentPattern(o,a){for(let r=-2;r<=2;r++)for(let c=-2;c<=2;c++)this.setFunctionModule(o+c,a+r,Math.max(Math.abs(c),Math.abs(r))!=1)}setFunctionModule(o,a,r){this.modules[a][o]=r,this.isFunction[a][o]=!0}addEccAndInterleave(o){let a=this.version,r=this.errorCorrectionLevel;if(o.length!=m.getNumDataCodewords(a,r))throw new RangeError("Invalid argument");let c=m.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][a],z=m.ECC_CODEWORDS_PER_BLOCK[r.ordinal][a],C=Math.floor(m.getNumRawDataModules(a)/8),M=c-C%c,E=Math.floor(C/c),S=[],ye=m.reedSolomonComputeDivisor(z);for(let B=0,be=0;B<c;B++){let Vt=o.slice(be,be+E-z+(B<M?0:1));be+=Vt.length;let In=m.reedSolomonComputeRemainder(Vt,ye);B<M&&Vt.push(0),S.push(Vt.concat(In))}let bt=[];for(let B=0;B<S[0].length;B++)S.forEach((be,Vt)=>{(B!=E-z||Vt>=M)&&bt.push(be[B])});return i(bt.length==C),bt}drawCodewords(o){if(o.length!=Math.floor(m.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let r=this.size-1;r>=1;r-=2){r==6&&(r=5);for(let c=0;c<this.size;c++)for(let z=0;z<2;z++){let C=r-z,E=(r+1&2)==0?this.size-1-c:c;!this.isFunction[E][C]&&a<o.length*8&&(this.modules[E][C]=t(o[a>>>3],7-(a&7)),a++)}}i(a==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let a=0;a<this.size;a++)for(let r=0;r<this.size;r++){let c;switch(o){case 0:c=(r+a)%2==0;break;case 1:c=a%2==0;break;case 2:c=r%3==0;break;case 3:c=(r+a)%3==0;break;case 4:c=(Math.floor(r/3)+Math.floor(a/2))%2==0;break;case 5:c=r*a%2+r*a%3==0;break;case 6:c=(r*a%2+r*a%3)%2==0;break;case 7:c=((r+a)%2+r*a%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[a][r]&&c&&(this.modules[a][r]=!this.modules[a][r])}}getPenaltyScore(){let o=0;for(let z=0;z<this.size;z++){let C=!1,M=0,E=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[z][S]==C?(M++,M==5?o+=m.PENALTY_N1:M>5&&o++):(this.finderPenaltyAddHistory(M,E),C||(o+=this.finderPenaltyCountPatterns(E)*m.PENALTY_N3),C=this.modules[z][S],M=1);o+=this.finderPenaltyTerminateAndCount(C,M,E)*m.PENALTY_N3}for(let z=0;z<this.size;z++){let C=!1,M=0,E=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][z]==C?(M++,M==5?o+=m.PENALTY_N1:M>5&&o++):(this.finderPenaltyAddHistory(M,E),C||(o+=this.finderPenaltyCountPatterns(E)*m.PENALTY_N3),C=this.modules[S][z],M=1);o+=this.finderPenaltyTerminateAndCount(C,M,E)*m.PENALTY_N3}for(let z=0;z<this.size-1;z++)for(let C=0;C<this.size-1;C++){let M=this.modules[z][C];M==this.modules[z][C+1]&&M==this.modules[z+1][C]&&M==this.modules[z+1][C+1]&&(o+=m.PENALTY_N2)}let a=0;for(let z of this.modules)a=z.reduce((C,M)=>C+(M?1:0),a);let r=this.size*this.size,c=Math.ceil(Math.abs(a*20-r*10)/r)-1;return i(c>=0&&c<=9),o+=c*m.PENALTY_N4,i(o>=0&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{let o=Math.floor(this.version/7)+2,a=Math.floor((this.version*8+o*3+5)/(o*4-4))*2,r=[6];for(let c=this.size-7;r.length<o;c-=a)r.splice(1,0,c);return r}}static getNumRawDataModules(o){if(o<m.MIN_VERSION||o>m.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*o+128)*o+64;if(o>=2){let r=Math.floor(o/7)+2;a-=(25*r-10)*r-55,o>=7&&(a-=36)}return i(a>=208&&a<=29648),a}static getNumDataCodewords(o,a){return Math.floor(m.getNumRawDataModules(o)/8)-m.ECC_CODEWORDS_PER_BLOCK[a.ordinal][o]*m.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let a=[];for(let c=0;c<o-1;c++)a.push(0);a.push(1);let r=1;for(let c=0;c<o;c++){for(let z=0;z<a.length;z++)a[z]=m.reedSolomonMultiply(a[z],r),z+1<a.length&&(a[z]^=a[z+1]);r=m.reedSolomonMultiply(r,2)}return a}static reedSolomonComputeRemainder(o,a){let r=a.map(c=>0);for(let c of o){let z=c^r.shift();r.push(0),a.forEach((C,M)=>r[M]^=m.reedSolomonMultiply(C,z))}return r}static reedSolomonMultiply(o,a){if(o>>>8||a>>>8)throw new RangeError("Byte out of range");let r=0;for(let c=7;c>=0;c--)r=r<<1^(r>>>7)*285,r^=(a>>>c&1)*o;return i(r>>>8==0),r}finderPenaltyCountPatterns(o){let a=o[1];i(a<=this.size*3);let r=a>0&&o[2]==a&&o[3]==a*3&&o[4]==a&&o[5]==a;return(r&&o[0]>=a*4&&o[6]>=a?1:0)+(r&&o[6]>=a*4&&o[0]>=a?1:0)}finderPenaltyTerminateAndCount(o,a,r){return o&&(this.finderPenaltyAddHistory(a,r),a=0),a+=this.size,this.finderPenaltyAddHistory(a,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(o,a){a[0]==0&&(o+=this.size),a.pop(),a.unshift(o)}static MIN_VERSION=1;static MAX_VERSION=40;static PENALTY_N1=3;static PENALTY_N2=3;static PENALTY_N3=40;static PENALTY_N4=10;static ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return m})();n.QrCode=l;function e(m,h,o){if(h<0||h>31||m>>>h)throw new RangeError("Value out of range");for(let a=h-1;a>=0;a--)o.push(m>>>a&1)}function t(m,h){return(m>>>h&1)!=0}function i(m){if(!m)throw new Error("Assertion error")}let s=(()=>{class m{mode;numChars;bitData;static makeBytes(o){let a=[];for(let r of o)e(r,8,a);return new m(m.Mode.BYTE,o.length,a)}static makeNumeric(o){if(!m.isNumeric(o))throw new RangeError("String contains non-numeric characters");let a=[];for(let r=0;r<o.length;){let c=Math.min(o.length-r,3);e(parseInt(o.substring(r,r+c),10),c*3+1,a),r+=c}return new m(m.Mode.NUMERIC,o.length,a)}static makeAlphanumeric(o){if(!m.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a=[],r;for(r=0;r+2<=o.length;r+=2){let c=m.ALPHANUMERIC_CHARSET.indexOf(o.charAt(r))*45;c+=m.ALPHANUMERIC_CHARSET.indexOf(o.charAt(r+1)),e(c,11,a)}return r<o.length&&e(m.ALPHANUMERIC_CHARSET.indexOf(o.charAt(r)),6,a),new m(m.Mode.ALPHANUMERIC,o.length,a)}static makeSegments(o){return o==""?[]:m.isNumeric(o)?[m.makeNumeric(o)]:m.isAlphanumeric(o)?[m.makeAlphanumeric(o)]:[m.makeBytes(m.toUtf8ByteArray(o))]}static makeEci(o){let a=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)e(o,8,a);else if(o<16384)e(2,2,a),e(o,14,a);else if(o<1e6)e(6,3,a),e(o,21,a);else throw new RangeError("ECI assignment value out of range");return new m(m.Mode.ECI,0,a)}static isNumeric(o){return m.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return m.ALPHANUMERIC_REGEX.test(o)}constructor(o,a,r){if(this.mode=o,this.numChars=a,this.bitData=r,a<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}getData(){return this.bitData.slice()}static getTotalBits(o,a){let r=0;for(let c of o){let z=c.mode.numCharCountBits(a);if(c.numChars>=1<<z)return 1/0;r+=4+z+c.bitData.length}return r}static toUtf8ByteArray(o){o=encodeURI(o);let a=[];for(let r=0;r<o.length;r++)o.charAt(r)!="%"?a.push(o.charCodeAt(r)):(a.push(parseInt(o.substring(r+1,r+3),16)),r+=2);return a}static NUMERIC_REGEX=/^[0-9]*$/;static ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+./:-]*$/;static ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return m})();n.QrSegment=s})(Ot||(Ot={}));(function(n){let l;(function(e){class t{ordinal;formatBits;static LOW=new t(0,1);static MEDIUM=new t(1,0);static QUARTILE=new t(2,3);static HIGH=new t(3,2);constructor(s,m){this.ordinal=s,this.formatBits=m}}e.Ecc=t})(l=n.QrCode||(n.QrCode={}))})(Ot||(Ot={}));(function(n){let l;(function(e){class t{modeBits;numBitsCharCount;static NUMERIC=new t(1,[10,12,14]);static ALPHANUMERIC=new t(2,[9,11,13]);static BYTE=new t(4,[8,16,16]);static KANJI=new t(8,[8,10,12]);static ECI=new t(7,[0,0,0]);constructor(s,m){this.modeBits=s,this.numBitsCharCount=m}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}}e.Mode=t})(l=n.QrSegment||(n.QrSegment={}))})(Ot||(Ot={}));var Qi=Ot,Fi=Qi.QrCode.Ecc,lr={L:Fi.LOW,M:Fi.MEDIUM,Q:Fi.QUARTILE,H:Fi.HIGH},yn="M",Ji="#FFFFFF",$i="#000000",mr=1,ur=.1,bn=(n,l=0)=>{let e=[];return n.forEach((t,i)=>{let s=null;t.forEach((m,h)=>{if(!m&&s!==null){e.push(`M${s+l} ${i+l}h${h-s}v1H${s+l}z`),s=null;return}if(h===t.length-1){if(!m)return;s===null?e.push(`M${h+l},${i+l} h1v1H${h+l}z`):e.push(`M${s+l},${i+l} h${h+1-s}v1H${s+l}z`);return}m&&s===null&&(s=h)})}),e.join("")},En=(n,l)=>n.slice().map((e,t)=>t<l.y||t>=l.y+l.h?e:e.map((i,s)=>s<l.x||s>=l.x+l.w?i:!1)),pr=(n,l,e,t)=>{if(t==null)return null;let i=n.length+e*2,s=Math.floor(l*ur),m=i/l,h=(t.width||s)*m,o=(t.height||s)*m,a=t.x==null?n.length/2-h/2:t.x*m,r=t.y==null?n.length/2-o/2:t.y*m,c=t.opacity==null?1:t.opacity,z=null;if(t.excavate){let M=Math.floor(a),E=Math.floor(r),S=Math.ceil(h+a-M),ye=Math.ceil(o+r-E);z={x:M,y:E,w:S,h:ye}}let C=t.crossOrigin;return{x:a,y:r,h:o,w:h,excavation:z,opacity:c,crossOrigin:C}},dr=n=>Math.max(Math.floor(n),0),cr=(()=>{try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),fr=(()=>{class n{canvas=Gi.required("canvas");image=Gi("image");icon=_("");margin=_(0);cells=_([]);numCells=_(0);calculatedImageSettings=_(null);size=_(160);color=_($i);bgColor=_(Ji);constructor(){Ht(()=>{this.icon(),this.margin(),this.cells(),this.numCells(),this.calculatedImageSettings(),this.size(),this.color(),this.bgColor(),this.canvas()?.nativeElement&&this.render()})}ngAfterViewInit(){this.render()}render(){let e=this.canvas();if(!e)return;let t=e.nativeElement.getContext("2d");t&&(this.setupCanvas(t),this.drawQRCode(t),this.handleImageLoading(t))}setupCanvas(e){let t=this.canvas();if(!t)return;let i=window.devicePixelRatio||1;t.nativeElement.height=t.nativeElement.width=this.size()*i,t.nativeElement.style.width=t.nativeElement.style.height=`${this.size()}px`;let s=this.size()/this.numCells()*i;e.scale(s,s),e.fillStyle=this.bgColor(),e.fillRect(0,0,this.numCells(),this.numCells()),e.fillStyle=this.color()}drawQRCode(e){let t=this.getCellsToDraw();this.haveImageToRender()||this.renderQRCode(e,t)}getCellsToDraw(){let e=this.cells(),t=this.calculatedImageSettings();return this.haveImageToRender()&&t&&t.excavation&&(e=En(this.cells(),t.excavation)),e}haveImageToRender(){return this.calculatedImageSettings()!=null&&!!this.image()}renderQRCode(e,t){cr?e.fill(new Path2D(bn(t,this.margin()))):t.forEach((i,s)=>{i.forEach((m,h)=>{m&&e.fillRect(h+this.margin(),s+this.margin(),1,1)})})}handleImageLoading(e){if(!this.haveImageToRender())return;let t=this.image();if(!t)return;let i=()=>{this.cleanupImageListeners(i,s),this.onImageLoadSuccess(e)},s=()=>{this.cleanupImageListeners(i,s),this.onImageLoadError(e)};t.nativeElement.addEventListener("load",i),t.nativeElement.addEventListener("error",s)}onImageLoadSuccess(e){let t=this.getCellsToDraw();this.renderQRCode(e,t);let i=this.calculatedImageSettings(),s=this.image();i&&s&&(e.globalAlpha=i.opacity,e.drawImage(s.nativeElement,i.x+this.margin(),i.y+this.margin(),i.w,i.h))}onImageLoadError(e){let t=this.getCellsToDraw();this.renderQRCode(e,t)}cleanupImageListeners(e,t){let i=this.image();i?.nativeElement&&(i.nativeElement.removeEventListener("load",e),i.nativeElement.removeEventListener("error",t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["nz-qrcode-canvas"]],viewQuery:function(t,i){t&1&&vo(i.canvas,Xn,5)(i.image,Yn,5),t&2&&_o(2)},inputs:{icon:[1,"icon"],margin:[1,"margin"],cells:[1,"cells"],numCells:[1,"numCells"],calculatedImageSettings:[1,"calculatedImageSettings"],size:[1,"size"],color:[1,"color"],bgColor:[1,"bgColor"]},exportAs:["nzQRCodeCanvas"],decls:3,vars:1,consts:[["canvas",""],["image",""],["role","img"],["alt","QR-Code","crossorigin","anonymous",2,"display","none"]],template:function(t,i){t&1&&(ti(0,"canvas",2,0),Ee(2,Qn,2,1,"img",3)),t&2&&(p(2),De(i.icon()?2:-1))},styles:["[_nghost-%COMP%]{display:block;line-height:0}"],changeDetection:0})}return n})(),hr=Qi.QrSegment,gr=(n,l=yn,e,t,i,s,m)=>{let h=zr(n,l,e,i),o=dr(s),a=h.getModules().length+o*2,r=pr(h.getModules(),t,o,m);return{cells:h.getModules(),margin:o,numCells:a,calculatedImageSettings:r,qrcode:h}},zr=(n,l=yn,e,t)=>{let s=(Array.isArray(n)?n:[n]).reduce((m,h)=>(m.push(...hr.makeSegments(h)),m),[]);return Qi.QrCode.encodeSegments(s,lr[l],e,void 0,void 0,t)},Mr=(()=>{class n{icon=_("");color=_($i);bgColor=_(Ji);imageSettings=_();size=_(160);margin=_(0);calculatedImageSettings=_(null);cells=_([]);numCells=_(0);viewBox="";backgroundPath="";foregroundPath="";constructor(){Ht(()=>{this.initializeViewBox(),this.generatePaths()})}initializeViewBox(){this.viewBox=`0 0 ${this.numCells()} ${this.numCells()}`,this.backgroundPath=`M0,0 h${this.numCells()}v${this.numCells()}H0z`}generatePaths(){let e=this.getCellsToDraw();this.foregroundPath=bn(e,this.margin())}getCellsToDraw(){return this.shouldExcavateCells()?En(this.cells(),this.calculatedImageSettings().excavation):this.cells()}shouldExcavateCells(){let e=this.calculatedImageSettings();return e!==null&&!!this.icon()&&e.excavation!==null}shouldShowIcon(){return!!this.icon()&&this.calculatedImageSettings()!=null}getImageX(){return(this.calculatedImageSettings()?.x||0)+this.margin()}getImageY(){return(this.calculatedImageSettings()?.y||0)+this.margin()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["nz-qrcode-svg"]],inputs:{icon:[1,"icon"],color:[1,"color"],bgColor:[1,"bgColor"],imageSettings:[1,"imageSettings"],size:[1,"size"],margin:[1,"margin"],calculatedImageSettings:[1,"calculatedImageSettings"],cells:[1,"cells"],numCells:[1,"numCells"]},exportAs:["nzQRCodeSVG"],decls:4,vars:8,consts:[["role","img"],["shapeRendering","crispEdges"],["preserveAspectRatio","none"]],template:function(t,i){t&1&&(Hi(),Wt(0,"svg",0),ti(1,"path",1)(2,"path",1),Ee(3,Jn,1,7,":svg:image",2),Ut()),t&2&&(jt("height",i.size())("width",i.size())("viewBox",i.viewBox),p(),jt("fill",i.bgColor())("d",i.backgroundPath),p(),jt("fill",i.color())("d",i.foregroundPath),p(),De(i.shouldShowIcon()?3:-1))},styles:["[_nghost-%COMP%]{display:block;line-height:0}"],changeDetection:0})}return n})(),Dn=(()=>{class n{i18n=N(Go);locale=Lo(this.i18n.localeChange.pipe(si(()=>this.i18n.getLocaleData("QRCode"))),{requireSync:!0});isBrowser=Fo(N(co));nzValue=_("");nzType=_("canvas");nzColor=_($i);nzBgColor=_(Ji);nzSize=_(160);nzIcon=_("");nzIconSize=_(40);nzBordered=_(!0);nzStatus=_("active");nzLevel=_("M");nzStatusRender=_(null);nzBoostLevel=_(!0);nzPadding=_(0);nzRefresh=ni();margin=Lt(0);cells=Lt([]);numCells=Lt(0);calculatedImageSettings=Lt(null);imageSettings=bo(()=>({src:this.nzIcon(),x:void 0,y:void 0,height:this.nzIconSize()??40,width:this.nzIconSize()??40,excavate:!0,crossOrigin:"anonymous"}));constructor(){Ht(()=>{this.updateQRCodeData()})}reloadQRCode(){this.updateQRCodeData(),this.nzRefresh.emit("refresh")}updateQRCodeData(){let{margin:e,cells:t,numCells:i,calculatedImageSettings:s}=gr(this.nzValue(),this.nzLevel(),mr,this.nzSize(),this.nzBoostLevel(),this.nzPadding(),this.imageSettings());this.margin.set(e),this.cells.set(t),this.numCells.set(i),this.calculatedImageSettings.set(s)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["nz-qrcode"]],hostAttrs:[1,"ant-qrcode"],hostVars:4,hostBindings:function(t,i){t&2&&(ui("background-color",i.nzBgColor()),So("ant-qrcode-border",i.nzBordered()))},inputs:{nzValue:[1,"nzValue"],nzType:[1,"nzType"],nzColor:[1,"nzColor"],nzBgColor:[1,"nzBgColor"],nzSize:[1,"nzSize"],nzIcon:[1,"nzIcon"],nzIconSize:[1,"nzIconSize"],nzBordered:[1,"nzBordered"],nzStatus:[1,"nzStatus"],nzLevel:[1,"nzLevel"],nzStatusRender:[1,"nzStatusRender"],nzBoostLevel:[1,"nzBoostLevel"],nzPadding:[1,"nzPadding"]},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],decls:3,vars:2,consts:[[1,"ant-qrcode-mask"],[4,"nzStringTemplateOutlet"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nzType","reload","nzTheme","outline"],[3,"icon","margin","cells","numCells","calculatedImageSettings","size","color","bgColor"],[3,"color","bgColor","icon","margin","cells","numCells","imageSettings","calculatedImageSettings","size"]],template:function(t,i){t&1&&(Ee(0,er,2,1,"div",0)(1,nr,4,1,"div",0),Ee(2,sr,2,1)),t&2&&(De(i.nzStatusRender()?0:i.nzStatus()!=="active"?1:-1),p(2),De(i.isBrowser?2:-1))},dependencies:[F,Ko,x,ge,he,T,zi,Oo,Mr,fr],encapsulation:2,changeDetection:0})}return n})();var ri=()=>({standalone:!0}),Bi=class n{constructor(){this.value="https://ng-alain.com/";this.background="#ffffff";this.foreground="#000000";this.level="L";this.mime="image/png";this.padding=10;this.size=220}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-qr"]],decls:42,vars:39,consts:[[1,"alain-default__content-title"],["href","https://ng.ant.design/components/qr-code","target","_blank"],[3,"nzGutter"],[1,"text-center",3,"nzSpan"],[3,"nzValue","nzBgColor","nzColor","nzLevel","nzSize","nzPadding"],[3,"nzSpan"],["nz-form",""],["nz-input","","type","color",2,"width","100px",3,"ngModelChange","ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzValue","L","nzLabel","L"],["nzValue","M","nzLabel","M"],["nzValue","Q","nzLabel","Q"],["nzValue","H","nzLabel","H"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax"],[3,"ngModelChange","ngModel","ngModelOptions","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u4E8C\u7EF4\u7801 "),u(3,"a",1),f(4,"Document"),d()()(),u(5,"nz-card")(6,"nz-row",2)(7,"nz-col",3),fe(8,"nz-qrcode",4),d(),u(9,"nz-col",5)(10,"form",6)(11,"nz-form-item")(12,"nz-form-label",5),f(13,"\u80CC\u666F"),d(),u(14,"nz-form-control",5)(15,"input",7),Ne("ngModelChange",function(s){return Me(t.background,s)||(t.background=s),s}),d()()(),u(16,"nz-form-item")(17,"nz-form-label",5),f(18,"\u524D\u666F"),d(),u(19,"nz-form-control",5)(20,"input",7),Ne("ngModelChange",function(s){return Me(t.foreground,s)||(t.foreground=s),s}),d()()(),u(21,"nz-form-item")(22,"nz-form-label",5),f(23,"\u8BEF\u5DEE"),d(),u(24,"nz-form-control",5)(25,"nz-select",8),Ne("ngModelChange",function(s){return Me(t.level,s)||(t.level=s),s}),fe(26,"nz-option",9)(27,"nz-option",10)(28,"nz-option",11)(29,"nz-option",12),d()()(),u(30,"nz-form-item")(31,"nz-form-label",5),f(32,"\u5185\u8FB9\u8DDD"),d(),u(33,"nz-form-control",5)(34,"nz-input-number",13),Ne("ngModelChange",function(s){return Me(t.padding,s)||(t.padding=s),s}),d(),f(35,"px "),d()(),u(36,"nz-form-item")(37,"nz-form-label",5),f(38,"\u5927\u5C0F"),d(),u(39,"nz-form-control",5)(40,"nz-input-number",14),Ne("ngModelChange",function(s){return Me(t.size,s)||(t.size=s),s}),d(),f(41,"px "),d()()()()()()),e&2&&(p(6),g("nzGutter",24),p(),g("nzSpan",8),p(),g("nzValue",t.value)("nzBgColor",t.background)("nzColor",t.foreground)("nzLevel",t.level)("nzSize",t.size)("nzPadding",t.padding),p(),g("nzSpan",16),p(3),g("nzSpan",8),p(2),g("nzSpan",16),p(),ze("ngModel",t.background),g("ngModelOptions",Ce(34,ri)),p(2),g("nzSpan",8),p(2),g("nzSpan",16),p(),ze("ngModel",t.foreground),g("ngModelOptions",Ce(35,ri)),p(2),g("nzSpan",8),p(2),g("nzSpan",16),p(),ze("ngModel",t.level),g("ngModelOptions",Ce(36,ri)),p(6),g("nzSpan",8),p(2),g("nzSpan",16),p(),ze("ngModel",t.padding),g("ngModelOptions",Ce(37,ri))("nzMin",0)("nzMax",100),p(3),g("nzSpan",8),p(2),g("nzSpan",16),p(),ze("ngModel",t.size),g("ngModelOptions",Ce(38,ri))("nzMin",100)("nzMax",1e3)("nzStep",t.padding))},dependencies:[A,Rt,gt,zt,It,Mt,Pt,L,oe,$,le,se,ae,x,W,K,vt,Ct,O,G,de,q,Ci,vi,T,k,me,P,Z,R,ne,Q,Nt,J,un,Y,X,H,re,pe,ie,V,ee,At,Xt,Qt,Yt,ue,F,te,_e,j,ce,U,I,Dn],encapsulation:2})}};var Nr=["*"],Cr=(()=>{class n{_change=new ai(null);toggle(){this._change.next(!0)}get change(){return this._change.pipe(lo())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ki="full-content__body",eo="full-content__opened",to="full-content__hidden-title",io=(()=>{class n{el=N(li).nativeElement;srv=N(Cr);router=N(di);doc=N(uo);bodyEl=this.doc.querySelector("body");id=`_full-content-${Math.random().toString(36).substring(2)}`;_height=Lt(0);hideTitle=_(!0,{transform:wo});padding=_(24,{transform:To});fullscreen=Eo();constructor(){ao(window,"resize").pipe(hi(),Oi(200)).subscribe(()=>this.updateHeight()),this.srv.change.pipe(hi(),ki(e=>e!==null)).subscribe(()=>this.toggle()),this.router.events.pipe(hi(),ki(e=>e instanceof Io||e instanceof Po),Oi(200)).subscribe(()=>{this.doc.querySelector(`#${this.id}`)?(this.bodyEl.classList.add(Ki),this.updateCls()):this.removeInBody()}),go(()=>{this.bodyEl.classList.add(Ki),this.el.id=this.id,this.updateCls(),this.updateHeight()}),Ht(()=>this.update())}updateCls(){let e=this.bodyEl.classList;this.fullscreen()?(e.add(eo),this.hideTitle()&&e.add(to)):(e.remove(eo),this.hideTitle()&&e.remove(to))}update(){this.updateCls(),this.updateHeight(),this.fullscreen.set(this.fullscreen())}updateHeight(){this._height.set(this.bodyEl.getBoundingClientRect().height-this.el.getBoundingClientRect().top-this.padding())}removeInBody(){this.bodyEl.classList.remove(Ki,eo,to)}toggle(){this.fullscreen.set(!this.fullscreen()),this.update(),this.updateHeight()}ngOnDestroy(){this.removeInBody()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["full-content"]],hostAttrs:[1,"full-content"],hostVars:2,hostBindings:function(t,i){t&2&&ui("height",i._height(),"px")},inputs:{hideTitle:[1,"hideTitle"],padding:[1,"padding"],fullscreen:[1,"fullscreen"]},outputs:{fullscreen:"fullscreenChange"},exportAs:["fullContent"],ngContentSelectors:Nr,decls:1,vars:0,template:function(t,i){t&1&&(No(),Co(0))},encapsulation:2,changeDetection:0})}return n})(),wn=(()=>{class n{parent=N(io);_click(){this.parent.toggle()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=mi({type:n,selectors:[["","full-toggle",""]],hostBindings:function(t,i){t&1&&v("click",function(){return i._click()})},exportAs:["fullToggle"]})}return n})();var Tn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ei({type:n});static \u0275inj=Kt({imports:[xo]})}return n})();var _r=n=>({params:n}),Sr=()=>({list:"results"}),yr=n=>({reName:n}),br=()=>[0,0,0,0];function Er(n,l){if(n&1&&fe(0,"g2-mini-bar",21),n&2){let e=b();g("padding",Ce(2,br))("data",e.events)}}var Ii=class n{constructor(){this.http=N(Ni);this.message=N(ht);this.ps=20;this.total=200;this.args={_allow_anonymous:!0,userid:null};this.url="https://api.randomuser.me/?results=20";this.events=[];this.scroll={y:"230px"};this.columns=[{title:"id",index:"id.value",type:"checkbox"},{title:"Avatar",index:"picture.thumbnail",type:"img",width:80},{title:"Name",index:"name.first",width:150,format:l=>`${l.name.first} ${l.name.last}`,type:"link",click:l=>this.message.info(`${l.name.first}`)},{title:"Email",index:"email"},{title:"Gender",index:"gender",type:"yn",yn:{truth:"female",yes:"\u7537",no:"\u5973",mode:"text"},width:120},{title:"Events",render:"events",width:90},{title:"Registered",index:"registered.date",type:"date",width:170},{title:"Actions",width:120,buttons:[{text:"Edit",click:l=>this.message.info(`edit [${l.id.value}]`),iif:l=>l.gender==="female"},{text:"Delete",type:"del",click:l=>this.message.info(`deleted [${l.id.value}]`)}]}]}ngOnInit(){this.http.get("/chart/visit").subscribe(l=>this.events=l.slice(0,8))}fullChange(l){this.scroll=l?{y:"350px"}:{y:"230px"}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-st"]],decls:43,vars:18,consts:[["exportMenu","nzDropdownMenu"],["st",""],[1,"alain-default__content-title"],["href","//ng-alain.com/components/table","target","_blank"],["href","//ng-alain.com/components/full-content","target","_blank"],[3,"fullscreenChange"],["nz-row","",1,"mb-md"],["nz-col","","nzSpan","12"],["nz-form","","nzLayout","inline","se-container",""],["label","User ID","labelWidth","0"],["nz-input","","name","userid","id","userid",3,"ngModelChange","ngModel"],["nz-button","",3,"click","nzType","nzLoading"],["nz-button","",3,"click","disabled"],[1,"text-right"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nzType","down"],["nz-menu",""],["nz-menu-item",""],["nz-button","","full-toggle","",1,"ml-sm",3,"nzType"],[3,"data","req","res","total","ps","columns","scroll"],["st-row","events"],["height","15","theme","mini","color","#999","borderWidth","3","tooltipType","mini",3,"padding","data"]],template:function(e,t){if(e&1){let i=Fe();u(0,"div",2)(1,"h1"),f(2," Fullscreen & ST "),u(3,"small"),f(4,"\u4F7F\u7528 "),u(5,"a",3),f(6,"st"),d(),f(7,"\u3001 "),u(8,"a",4),f(9,"full-content"),d(),f(10," \u7EC4\u5408\uFF0C\u7531\u4E8E nz-table \u56FA\u5B9A\u8868\u5934\u6682\u4E0D\u652F\u6301\u81EA\u9002\u5E94\uFF0C\u56E0\u6B64\u8868\u683C\u7684\u5C55\u793A\u7684\u6548\u679C\u5728\u54CD\u5E94\u5F0F\u91CC\u9762\u6548\u679C\u5E76\u4E0D\u662F\u7279\u522B\u597D\u3002"),d()()(),u(11,"full-content",5),v("fullscreenChange",function(m){return D(i),w(t.fullChange(m))}),u(12,"nz-card")(13,"div",6)(14,"div",7)(15,"form",8)(16,"se",9)(17,"input",10),Ne("ngModelChange",function(m){return D(i),Me(t.args.userid,m)||(t.args.userid=m),w(m)}),d()(),u(18,"se")(19,"button",11),v("click",function(){D(i);let m=St(41);return w(m.load())}),f(20,"Search"),d(),u(21,"button",12),v("click",function(){D(i);let m=St(41);return w(m.load(1,{_allow_anonymous:!0}))}),f(22,"Clear"),d()()()(),u(23,"div",7)(24,"div",13)(25,"button",14)(26,"span"),f(27,"Export"),d(),fe(28,"nz-icon",15),d(),u(29,"nz-dropdown-menu",null,0)(31,"ul",16)(32,"li",17),f(33,"Excel"),d(),u(34,"li",17),f(35,"JSON"),d(),u(36,"li",17),f(37,"PNG"),d()()(),u(38,"button",18),f(39,"Full"),d()()()(),u(40,"st",19,1),Gt(42,Er,1,3,"ng-template",20),d()()()}if(e&2){let i=St(30);p(17),ze("ngModel",t.args.userid),p(2),g("nzType","primary")("nzLoading",t.http.loading),p(2),g("disabled",t.http.loading),p(4),g("nzDropdownMenu",i),p(13),g("nzType","default"),p(2),g("data",t.url)("req",oi(13,_r,t.args))("res",oi(16,yr,Ce(15,Sr)))("total",t.total)("ps",t.ps)("columns",t.columns)("scroll",t.scroll)}},dependencies:[A,Rt,gt,zt,It,Mt,Pt,L,oe,$,Zt,pn,le,se,hn,gn,ae,x,ge,he,ve,W,Qo,Yo,Jo,$o,K,vt,Ct,O,G,de,q,T,zi,k,me,P,Z,R,ne,Q,Nt,J,Y,X,H,re,pe,ie,V,ee,At,ue,F,te,_e,j,ce,U,I,Tn,io,wn,Mn],encapsulation:2})}};var xn=()=>({standalone:!0}),Pi=class n{constructor(){this.messageSrv=N(ht);this.format_str="this is ${name}";this.format_res="";this.format_obj=JSON.stringify({name:"asdf"});this.content=`time ${+new Date}

    \u4E2D\u6587\uFF01@#\uFFE5%\u2026\u2026&*`}onFormat(){let l=null;try{l=JSON.parse(this.format_obj)}catch{this.messageSrv.error("\u65E0\u6CD5\u4F7F\u7528 JSON.parse \u8F6C\u6362");return}this.format_res=qo(this.format_str,l,!0)}onYuan(l){this.yuan_res=cn(l)}onCopy(){Wo(`time ${+new Date}`).then(()=>this.messageSrv.success("success"))}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-util"]],decls:39,vars:23,consts:[[1,"alain-default__content-title"],[3,"nzGutter"],[3,"nzSpan"],["nzTitle","\u5B57\u7B26\u4E32\u7C7B"],["nzType","inner","nzTitle","format"],["nz-form",""],[3,"nzSm"],["nz-input","",3,"ngModelChange","ngModel","ngModelOptions"],[3,"nzSpan","nzOffset"],["nz-button","",3,"click"],["nzType","inner","nzTitle","yuan"],["type","number","nz-input","",3,"ngModelChange","ngModel"],[3,"innerHTML"],["nzTitle","\u5176\u5B83\u7C7B"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," \u5DE5\u5177\u96C6 "),u(3,"small"),f(4,"@delon/util \u65E5\u5E38\u7528\u6CD5\u3002"),d()()(),u(5,"nz-row",1)(6,"nz-col",2)(7,"nz-card",3)(8,"nz-card",4)(9,"form",5)(10,"nz-form-item")(11,"nz-form-label",6),f(12,"String"),d(),u(13,"nz-form-control",6)(14,"input",7),Ne("ngModelChange",function(s){return Me(t.format_str,s)||(t.format_str=s),s}),d()()(),u(15,"nz-form-item")(16,"nz-form-label",6),f(17,"Object"),d(),u(18,"nz-form-control",6)(19,"input",7),Ne("ngModelChange",function(s){return Me(t.format_obj,s)||(t.format_obj=s),s}),d()()(),u(20,"nz-form-item")(21,"nz-form-control",8)(22,"button",9),v("click",function(){return t.onFormat()}),f(23,"Run"),d()()(),u(24,"nz-form-item")(25,"nz-form-label",6),f(26,"Result"),d(),u(27,"nz-form-control",6),f(28),d()()()(),u(29,"nz-card",10)(30,"nz-row",1)(31,"nz-col",2)(32,"input",11),Ne("ngModelChange",function(s){return Me(t.yuan_str,s)||(t.yuan_str=s),s}),v("ngModelChange",function(s){return t.onYuan(s)}),d()(),u(33,"nz-col",2),fe(34,"div",12),d()()()()(),u(35,"nz-col",2)(36,"nz-card",13)(37,"button",9),v("click",function(){return t.onCopy()}),f(38,"Copy"),d()()()()),e&2&&(p(5),g("nzGutter",16),p(),g("nzSpan",12),p(5),g("nzSm",8),p(2),g("nzSm",16),p(),ze("ngModel",t.format_str),g("ngModelOptions",Ce(21,xn)),p(2),g("nzSm",8),p(2),g("nzSm",16),p(),ze("ngModel",t.format_obj),g("ngModelOptions",Ce(22,xn)),p(2),g("nzSpan",16)("nzOffset",8),p(4),g("nzSm",8),p(2),g("nzSm",16),p(),we(" ",t.format_res," "),p(2),g("nzGutter",16),p(),g("nzSpan",12),p(),ze("ngModel",t.yuan_str),p(),g("nzSpan",12),p(),g("innerHTML",t.yuan_res,fo),p(),g("nzSpan",12))},dependencies:[A,Rt,gt,Uo,zt,It,Mt,Pt,L,oe,$,le,se,ae,x,ge,he,ve,W,K,vt,Ct,O,G,de,q,T,k,me,P,Z,R,ne,Q,Nt,J,Y,X,H,re,pe,ie,V,ee,At,Xt,Qt,Yt,ue,F,te,_e,j,ce,U,I],encapsulation:2})}};var Ri=class n{constructor(){this.xlsx=N(Xo);this.users=Array(100).fill(0).map((l,e)=>({id:e+1,name:`name ${e+1}`,age:Math.ceil(Math.random()*10)+20}));this.columns=[{title:"\u7F16\u53F7",index:"id",type:"checkbox"},{title:"\u59D3\u540D",index:"name"},{title:"\u5E74\u9F84",index:"age"}]}url(){this.xlsx.import("./assets/tmp/demo.xlsx").then(l=>this.data=l)}change(l){let e=l.target.files[0];this.xlsx.import(e).then(t=>this.data=t)}download(){let l=[this.columns.map(e=>e.title)];this.users.forEach(e=>l.push(this.columns.map(t=>e[t.index]))),this.xlsx.export({sheets:[{data:l,name:"sheet name"}]})}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-xlsx"]],decls:16,vars:6,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/xlsx","target","_blank"],["nzTitle","Import"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],[1,"mt-sm"],["nzTitle","Export"],[1,"mt-sm",3,"data","ps","columns"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Import & Export excel file, "),u(3,"a",1),f(4,"Document"),d()()(),u(5,"nz-card",2)(6,"button",3),v("click",function(){return t.url()}),f(7,"Via Url"),d(),u(8,"input",4),v("change",function(s){return t.change(s)}),d(),u(9,"p",5),f(10),xt(11,"json"),d()(),u(12,"nz-card",6)(13,"button",3),v("click",function(){return t.download()}),f(14,"Export"),d(),fe(15,"st",7),d()),e&2&&(p(10),we("result: ",Ft(11,4,t.data)),p(5),g("data",t.users)("ps",3)("columns",t.columns))},dependencies:[A,L,oe,$,Zt,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,R,ne,Q,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I,Bt],encapsulation:2})}};var Fn=oo(Yi(),1);var Bn=(()=>{class n{http=N(pi);lazy=N(fi);ngZone=N(po);cogSrv=N(qt);cog;constructor(){this.cog=this.cogSrv.merge("zip",{url:"https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js",utils:[]})}init(){return this.lazy.load([this.cog.url].concat(this.cog.utils))}check(e){if(!e)throw new Error("get instance via `ZipService.create()`")}read(e,t){return new Promise((i,s)=>{let m=h=>{this.ngZone.run(()=>i(h))};this.init().then(()=>{if(typeof e=="string"){this.http.request("GET",e,{responseType:"arraybuffer"}).subscribe({next:o=>{JSZip.loadAsync(o,t).then(a=>m(a))},error:o=>{s(o)}});return}let h=new FileReader;h.onload=o=>{JSZip.loadAsync(o.target.result,t).then(a=>m(a))},h.readAsArrayBuffer(e)})})}create(){return new Promise(e=>{this.init().then(()=>{let t=new JSZip;e(t)}).catch(()=>e(null))})}pushUrl(e,t,i){return this.check(e),new Promise((s,m)=>{this.http.request("GET",i,{responseType:"arraybuffer"}).subscribe({next:h=>{e.file(t,h),s()},error:h=>{m({url:i,error:h})}})})}save(e,t){this.check(e);let i=xe({filename:"download.zip"},t);return new Promise((s,m)=>{e.generateAsync(xe({type:"blob"},i.options),i.update).then(h=>{i.callback&&i.callback(h),(0,Fn.saveAs)(h,i.filename),s()},h=>{m(h)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"})}return ro([Zo()],n.prototype,"read",null),n})();function Dr(n,l){if(n&1&&(u(0,"li"),f(1),xt(2,"json"),d()),n&2){let e=l.$implicit;p(),kt(Ft(2,1,e))}}function wr(n,l){if(n&1){let e=Fe();u(0,"nz-card",2)(1,"button",4),v("click",function(){D(e);let i=b();return w(i.url())}),f(2,"Via Url"),d(),u(3,"input",5),v("change",function(i){D(e);let s=b();return w(s.change(i))}),d(),u(4,"ol"),wt(5,Dr,3,3,"li",null,Dt),d()()}if(n&2){let e=b();p(5),Tt(e.list)}}function Tr(n,l){if(n&1){let e=Fe();u(0,"tr")(1,"td")(2,"input",9),Ne("ngModelChange",function(i){let s=D(e).$implicit;return Me(s.path,i)||(s.path=i),w(i)}),d()(),u(3,"td")(4,"input",9),Ne("ngModelChange",function(i){let s=D(e).$implicit;return Me(s.url,i)||(s.url=i),w(i)}),d()()()}if(n&2){let e=l.$implicit,t=l.$index;p(2),g("name",ii("path",t)),ze("ngModel",e.path),p(2),g("name",ii("url",t)),ze("ngModel",e.url)}}function xr(n,l){if(n&1){let e=Fe();u(0,"nz-card",3)(1,"button",6),v("click",function(){D(e);let i=b();return w(i.data.push({}))}),f(2,"new"),d(),u(3,"button",7),v("click",function(){D(e);let i=b();return w(i.download())}),f(4,"download"),d(),u(5,"nz-table",8)(6,"thead")(7,"tr")(8,"th")(9,"span"),f(10,"path"),d()(),u(11,"th")(12,"span"),f(13,"url"),d()()()(),u(14,"tbody"),wt(15,Tr,5,6,"tr",null,Dt),d()()()}if(n&2){let e=b();p(),g("nzType","primary"),p(4),g("nzData",e.data)("nzFrontPagination",!1)("nzShowPagination",!1),p(10),Tt(e.data)}}var Ai=class n{constructor(){this.zip=N(Bn);this.msg=N(ht);this.cdr=N(Do);this.instance=null;this.data=[{path:"demo.docx",url:"https://ng-alain.com/assets/demo.docx"},{path:"\u5C0F\u7A0B\u5E8F\u6807\u5FD7.zip",url:"https://wximg.gtimg.com/shake_tv/mina/standard_logo.zip"}]}ngOnInit(){this.zip.create().then(l=>{this.instance=l,this.cdr.detectChanges()})}format(l){let e=l.files;this.list=Object.keys(e).map(t=>({name:t,dir:e[t].dir,date:e[t].date})),this.cdr.detectChanges()}url(){this.zip.read("./assets/tmp/demo.zip").then(l=>this.format(l))}change(l){let e=l.target.files[0];this.zip.read(e).then(t=>this.format(t))}download(){let l=[];this.data.forEach(e=>{l.push(this.zip.pushUrl(this.instance,e.path,e.url))}),Promise.all(l).then(()=>{this.zip.save(this.instance).then(()=>{this.msg.success("download success"),this.data=[]})},e=>{console.warn(e),this.msg.error(JSON.stringify(e))})}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-zip"]],decls:7,vars:2,consts:[[1,"alain-default__content-title"],["href","//ng-alain.com/components/zip","target","_blank"],["nzTitle","\u89E3\u538B"],["nzTitle","\u538B\u7F29"],["nz-button","",3,"click"],["type","file","multiple","false",1,"ml-sm",3,"change"],["nz-button","",3,"click","nzType"],["nz-button","",1,"ml-sm",3,"click"],[1,"mt-sm",3,"nzData","nzFrontPagination","nzShowPagination"],["nz-input","",3,"ngModelChange","ngModel","name"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"h1"),f(2," Read & Write zip file, "),u(3,"a",1),f(4,"Document"),d()()(),Ee(5,wr,7,0,"nz-card",2),Ee(6,xr,17,4,"nz-card",3)),e&2&&(p(5),De(t.instance?5:-1),p(),De(t.instance?6:-1))},dependencies:[A,gt,zt,Mt,L,oe,$,le,se,ae,x,ge,he,ve,W,K,O,G,de,q,T,k,me,P,Z,nn,en,tn,an,on,rn,R,ne,Q,Nt,J,Y,X,H,re,pe,ie,V,ee,ue,F,te,_e,j,ce,U,I,Bt],encapsulation:2,changeDetection:0})}};var pl=[{path:"st",component:Ii},{path:"util",component:Pi},{path:"print",component:xi},{path:"acl",component:_i},{path:"guard",component:wi,children:[{path:"leave",component:Ti,canDeactivate:[_n]},{path:"auth",component:Di,canActivate:[ji],data:{guard:"user1"}},{path:"admin",component:Ei,canActivate:[ji],data:{guard:"admin"}}]},{path:"cache",component:Si},{path:"qr",component:Bi},{path:"downfile",component:yi},{path:"xlsx",component:Ri},{path:"zip",component:Ai},{path:"form",component:bi}];export{pl as routes};
