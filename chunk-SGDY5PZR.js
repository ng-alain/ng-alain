import{b as re}from"./chunk-Q2G2QH7N.js";import{$f as ie,Ba as L,Ce as Y,Fb as H,Ga as m,Gb as B,Ib as G,Jb as W,Je as ee,Kb as Q,Lb as S,Oa as z,Oe as te,Pe as ne,Qa as _,Ta as T,Ua as O,Zd as U,a as c,aa as N,ag as se,b as A,bc as $,bg as oe,cb as R,cg as ae,ea as a,eb as P,gb as b,hb as j,ia as p,ib as K,ja as d,jb as u,k as C,kb as l,lb as f,ma as w,mb as r,ne as J,oa as x,oc as q,oe as X,pa as F,qb as V,rb as k,tb as M,tc as Z,vb as I,wa as y,xa as h,xb as E}from"./chunk-ULLXQYZ5.js";var ce=["animationElement"],me=(n,o)=>({$implicit:n,data:o});function le(n,o){n&1&&r(0,"nz-icon",4)}function pe(n,o){n&1&&r(0,"nz-icon",5)}function de(n,o){n&1&&r(0,"nz-icon",6)}function he(n,o){n&1&&r(0,"nz-icon",7)}function ue(n,o){n&1&&r(0,"nz-icon",8)}function fe(n,o){if(n&1&&(V(0),r(1,"span",10),k()),n&2){let e=E();m(),u("innerHTML",e.instance.content,L)}}function ge(n,o){if(n&1){let e=M();l(0,"nz-message",2),I("destroyed",function(i){p(e);let s=E();return d(s.remove(i.id,i.userAction))}),f()}if(n&2){let e=o.$implicit;u("instance",e)}}var ve=0,D=class{container;nzSingletonService=a(re);injector=a(w);remove(o){this.container&&(o?this.container.remove(o):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${ve++}`}withContainer(o){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;let t=ne(this.injector,{hasBackdrop:!1,scrollStrategy:ee(),positionStrategy:te(this.injector)}),i=new Y(o,null,this.injector),s=t.attach(i),v=t.hostElement;return v.style.zIndex="1010",e||(this.container=e=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),t.dispose()})),e}},Ce=(()=>{class n{config;instances=[];_afterAllInstancesRemoved=new C;afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable();cdr=a(Z);nzConfigService=a(J);constructor(){this.subscribeConfigChange()}create(e){let t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,t],this.readyInstances(),t}remove(e,t=!1){this.instances.map((i,s)=>({index:s,instance:i})).filter(({instance:i})=>i.messageId===e).forEach(({index:i,instance:s})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(s,t),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new C,e}onRemove(e,t){e.onClose.next(t),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:t,nzAnimate:i,nzPauseOnHover:s}=this.config;return c({nzDuration:t,nzAnimate:i,nzPauseOnHover:s},e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=_({type:n})}return n})(),ye=(()=>{class n{destroyRef=a(x);elementRef=a(h);options;autoClose;userAction=!1;eraseTimer;eraseTimingStart;eraseTTL;constructor(){this.destroyRef.onDestroy(()=>{this.autoClose&&this.clearEraseTimeout()})}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this._startEnterAnimation()),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this._startLeaveAnimation(()=>this.destroyed.next({id:this.instance.messageId,userAction:e}))):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}_startEnterAnimation(){let e=this.animationElement().nativeElement;e.classList.add(this._animationClassMap.enter);let t=i=>{this.matchAnimationKeyframe(i,this._animationKeyframeMap.enter)&&(e.removeEventListener("animationend",t),e.classList.remove(this._animationClassMap.enter))};e.addEventListener("animationend",t)}_startLeaveAnimation(e){let t=this.animationElement().nativeElement;t.classList.remove(this._animationClassMap.enter),t.classList.add(this._animationClassMap.leave);let i=s=>{this.matchAnimationKeyframe(s,this._animationKeyframeMap.leave)&&(t.removeEventListener("animationend",i),e())};t.addEventListener("animationend",i)}matchAnimationKeyframe(e,t){return typeof t=="string"?e.animationName===t:t.includes(e.animationName)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=_({type:n})}return n})(),ze=(()=>{class n extends ye{instance;destroyed=new F;index;animationElement=q.required("animationElement",{read:h});_animationKeyframeMap={enter:"MessageMoveIn",leave:"MessageMoveOut"};_animationClassMap={enter:"ant-message-move-up-enter",leave:"ant-message-move-up-leave"};static \u0275fac=(()=>{let e;return function(i){return(e||(e=y(n)))(i||n)}})();static \u0275cmp=z({type:n,selectors:[["nz-message"]],viewQuery:function(t,i){t&1&&H(i.animationElement,ce,5,h),t&2&&B()},inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[T],decls:10,vars:12,consts:[["animationElement",""],[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML"]],template:function(t,i){if(t&1){let s=M();l(0,"div",1,0),I("mouseenter",function(){return p(s),d(i.onEnter())})("mouseleave",function(){return p(s),d(i.onLeave())}),l(2,"div",2)(3,"div",3),R(4,le,1,0,"nz-icon",4)(5,pe,1,0,"nz-icon",5)(6,de,1,0,"nz-icon",6)(7,he,1,0,"nz-icon",7)(8,ue,1,0,"nz-icon",8),O(9,fe,2,1,"ng-container",9),f()()()}if(t&2){let s;Q(i.instance.options==null?null:i.instance.options.nzStyle),S(i.instance.options==null?null:i.instance.options.nzClass),m(3),S("ant-message-"+i.instance.type),m(),P((s=i.instance.type)==="success"?4:s==="info"?5:s==="warning"?6:s==="error"?7:s==="loading"?8:-1),m(5),u("nzStringTemplateOutlet",i.instance.content)("nzStringTemplateOutletContext",$(9,me,i,i.instance.options==null?null:i.instance.options.nzData))}},dependencies:[se,ie,ae,oe],encapsulation:2,changeDetection:0})}return n})(),g="message",_e={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},Te=(()=>{class n extends Ce{dir=this.nzConfigService.getConfigForComponent(g)?.nzDirection||"ltr";top;constructor(){super(),this.updateConfig()}subscribeConfigChange(){X(g,()=>{this.updateConfig(),this.dir=this.nzConfigService.getConfigForComponent(g)?.nzDirection||this.dir})}updateConfig(){this.config=c(c(c({},_e),this.config),this.nzConfigService.getConfigForComponent(g)),this.top=U(this.config.nzTop),this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=z({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[T],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(t,i){t&1&&(l(0,"div",0),j(1,ge,1,1,"nz-message",1,b),f()),t&2&&(G("top",i.top),W("ant-message-rtl",i.dir==="rtl"),m(),K(i.instances))},dependencies:[ze],encapsulation:2,changeDetection:0})}return n})(),He=(()=>{class n extends D{componentPrefix="message-";success(e,t){return this.createInstance({type:"success",content:e},t)}error(e,t){return this.createInstance({type:"error",content:e},t)}info(e,t){return this.createInstance({type:"info",content:e},t)}warning(e,t){return this.createInstance({type:"warning",content:e},t)}loading(e,t){return this.createInstance({type:"loading",content:e},t)}create(e,t,i){return this.createInstance({type:e,content:t},i)}createInstance(e,t){return this.container=this.withContainer(Te),this.container.create(A(c({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}static \u0275fac=(()=>{let e;return function(i){return(e||(e=y(n)))(i||n)}})();static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{D as a,Ce as b,ye as c,He as d};
