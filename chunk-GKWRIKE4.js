import{$a as j,$d as M,Ca as R,Ce as Z,H as N,Ha as l,Ia as r,Je as q,N as x,Oa as z,Qa as y,Qd as K,Rg as ee,Sa as T,Va as b,Wf as J,X as E,Xf as Q,Yf as X,Zf as Y,_a as h,a as c,ab as P,b as D,ba as w,cb as $,ea as f,gc as p,hb as L,jb as k,k as m,ka as A,kb as H,la as O,lb as U,mb as d,nb as u,ob as a,pa as F,pb as V,qb as W,ra as C,sb as G,vb as _,ve as B,xb as I}from"./chunk-QW5B6DY5.js";function te(n,o){n&1&&a(0,"nz-icon",3)}function ne(n,o){n&1&&a(0,"nz-icon",4)}function ie(n,o){n&1&&a(0,"nz-icon",5)}function se(n,o){n&1&&a(0,"nz-icon",6)}function oe(n,o){n&1&&a(0,"nz-icon",7)}function re(n,o){if(n&1&&(V(0),a(1,"span",9),W()),n&2){let e=I();l(),h("innerHTML",e.instance.content,R)}}function ae(n,o){if(n&1){let e=G();d(0,"nz-message",2),_("destroyed",function(i){A(e);let s=I();return O(s.remove(i.id,i.userAction))}),u()}if(n&2){let e=o.$implicit;h("instance",e)}}var ce=0,S=class{constructor(o,e,t){this.nzSingletonService=o,this.overlay=e,this.injector=t}remove(o){this.container&&(o?this.container.remove(o):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${ce++}`}withContainer(o){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;let t=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),i=new B(o,null,this.injector),s=t.attach(i),v=t.hostElement;return v.style.zIndex="1010",e||(this.container=e=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),t.dispose()})),e}},le=(()=>{class n{constructor(e,t){this.cdr=e,this.nzConfigService=t,this.instances=[],this._afterAllInstancesRemoved=new m,this.afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable(),this.destroy$=new m,this.updateConfig()}ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){let t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,t],this.readyInstances(),t}remove(e,t=!1){this.instances.map((i,s)=>({index:s,instance:i})).filter(({instance:i})=>i.messageId===e).forEach(({index:i,instance:s})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(s,t),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new m,e}onRemove(e,t){e.onClose.next(t),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:t,nzAnimate:i,nzPauseOnHover:s}=this.config;return c({nzDuration:t,nzAnimate:i,nzPauseOnHover:s},e)}static{this.\u0275fac=function(t){return new(t||n)(r(p),r(M))}}static{this.\u0275dir=y({type:n})}}return n})(),me=(()=>{class n{constructor(e){this.cdr=e,this.destroyed=new C,this.animationStateChanged=new m,this.userAction=!1}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(N(e=>e.phaseName==="done"&&e.toState==="leave"),x(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static{this.\u0275fac=function(t){return new(t||n)(r(p))}}static{this.\u0275dir=y({type:n})}}return n})(),he=(()=>{class n extends me{constructor(e){super(e),this.destroyed=new C}static{this.\u0275fac=function(t){return new(t||n)(r(p))}}static{this.\u0275cmp=z({type:n,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[T],decls:9,vars:5,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(t,i){if(t&1&&(d(0,"div",0),_("@moveUpMotion.done",function(v){return i.animationStateChanged.next(v)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),d(1,"div",1)(2,"div",2),b(3,te,1,0,"nz-icon",3)(4,ne,1,0,"nz-icon",4)(5,ie,1,0,"nz-icon",5)(6,se,1,0,"nz-icon",6)(7,oe,1,0,"nz-icon",7)(8,re,2,1,"ng-container",8),u()()()),t&2){let s;h("@moveUpMotion",i.instance.state),l(2),$("ant-message-"+i.instance.type),l(),L((s=i.instance.type)==="success"?3:s==="info"?4:s==="warning"?5:s==="error"?6:s==="loading"?7:-1),l(5),h("nzStringTemplateOutlet",i.instance.content)}},dependencies:[Q,J,Y,X],encapsulation:2,data:{animation:[ee]},changeDetection:0})}}return n})(),g="message",de={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},pe=(()=>{class n extends le{constructor(e,t){super(e,t),this.dir="ltr";let i=this.nzConfigService.getConfigForComponent(g);this.dir=i?.nzDirection||"ltr"}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(g).pipe(E(this.destroy$)).subscribe(()=>{this.updateConfig();let e=this.nzConfigService.getConfigForComponent(g);if(e){let{nzDirection:t}=e;this.dir=t||this.dir}})}updateConfig(){this.config=c(c(c({},de),this.config),this.nzConfigService.getConfigForComponent(g)),this.top=K(this.config.nzTop),this.cdr.markForCheck()}static{this.\u0275fac=function(t){return new(t||n)(r(p),r(M))}}static{this.\u0275cmp=z({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[T],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(t,i){t&1&&(d(0,"div",0),H(1,ae,1,1,"nz-message",1,k),u()),t&2&&(j("top",i.top),P("ant-message-rtl",i.dir==="rtl"),l(),U(i.instances))},dependencies:[he],encapsulation:2,changeDetection:0})}}return n})();var $e=(()=>{class n extends S{constructor(e,t,i){super(e,t,i),this.componentPrefix="message-"}success(e,t){return this.createInstance({type:"success",content:e},t)}error(e,t){return this.createInstance({type:"error",content:e},t)}info(e,t){return this.createInstance({type:"info",content:e},t)}warning(e,t){return this.createInstance({type:"warning",content:e},t)}loading(e,t){return this.createInstance({type:"loading",content:e},t)}create(e,t,i){return this.createInstance({type:e,content:t},i)}createInstance(e,t){return this.container=this.withContainer(pe),this.container.create(D(c({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}static{this.\u0275fac=function(t){return new(t||n)(f(q),f(Z),f(F))}}static{this.\u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{S as a,le as b,me as c,$e as d};
